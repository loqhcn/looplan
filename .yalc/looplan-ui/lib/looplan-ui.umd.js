(function(A,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue"),require("looplan"),require("axios")):typeof define=="function"&&define.amd?define(["exports","vue","looplan","axios"],e):(A=typeof globalThis<"u"?globalThis:A||self,e(A["looplan-ui"]={},A.Vue,A.Looplan,A.axios))})(this,function(A,e,W,ve){"use strict";var ja=Object.defineProperty;var Oa=(A,e,W)=>e in A?ja(A,e,{enumerable:!0,configurable:!0,writable:!0,value:W}):A[e]=W;var M=(A,e,W)=>Oa(A,typeof e!="symbol"?e+"":e,W);const Ft={name:"LpButton"},He=e.defineComponent({...Ft,props:{type:{default:"primary"},text:{default:"按钮"}},emits:["click"],setup(o,{emit:t}){const s=t,n=l=>{s("click",l)};return(l,a)=>(e.openBlock(),e.createElementBlock("button",{class:e.normalizeClass(["btn",l.type]),onClick:n},[e.renderSlot(l.$slots,"default",{},()=>[e.createTextVNode(e.toDisplayString(l.text),1)])],2))}}),Wt={class:"lp-button-group"},Ut={name:"LpButtonGroup"},Ht=e.defineComponent({...Ut,setup(o){return(t,s)=>(e.openBlock(),e.createElementBlock("div",Wt,[e.renderSlot(t.$slots,"default",{},void 0,!0)]))}}),ce=(o,t)=>{const s=o.__vccOpts||o;for(const[n,l]of t)s[n]=l;return s},Ge=ce(Ht,[["__scopeId","data-v-04957fc5"]]),Gt=Object.freeze(Object.defineProperty({__proto__:null,default:{install:o=>{o.component(He.name,He),o.component(Ge.name,Ge)}}},Symbol.toStringTag,{value:"Module"})),Yt={class:"lp-checkbox__input"},Xt=["value","name","disabled","checked","midway"],qt={key:0,class:"lp-checkbox__label"},Kt={name:"LpCheckbox"},de=e.defineComponent({...Kt,props:{modelValue:{type:[Boolean,String,Number],default:!1},label:{type:[String,Number,Boolean]},trueLabel:{},falseLabel:{},disabled:{type:Boolean},name:{},size:{default:"default"},midway:{type:Boolean,default:!1}},emits:["update:modelValue","change"],setup(o,{emit:t}){const s=o,n=t,l=e.ref(),a=e.ref(!1),r=e.inject("checkboxGroup",void 0),u=e.computed({get(){var m;return((m=r==null?void 0:r.modelValue)==null?void 0:m.value)??s.modelValue},set(m){var E;r?(E=r.changeEvent)==null||E.call(r,m):(n("update:modelValue",m),n("change",m))}}),c=e.computed(()=>{var m,E;if(r){const v=s.label??s.trueLabel;return(E=(m=r.modelValue)==null?void 0:m.value)==null?void 0:E.includes(v)}return s.trueLabel!==void 0||s.falseLabel!==void 0?u.value===s.trueLabel:!!u.value}),f=e.computed(()=>{var m;return((m=r==null?void 0:r.size)==null?void 0:m.value)??s.size}),y=e.computed(()=>{var m;return((m=r==null?void 0:r.disabled)==null?void 0:m.value)??s.disabled}),B=m=>{var O,V;const v=m.target.checked;if(r){const w=s.label??s.trueLabel;if(w!==void 0){const _=[...((O=r.modelValue)==null?void 0:O.value)||[]];if(v)_.includes(w)||_.push(w);else{const h=_.indexOf(w);h>-1&&_.splice(h,1)}(V=r.changeEvent)==null||V.call(r,_)}}else{let w;s.trueLabel!==void 0||s.falseLabel!==void 0?w=v?s.trueLabel:s.falseLabel:w=v,u.value=w}};return e.computed(()=>s.midway),(m,E)=>(e.openBlock(),e.createElementBlock("label",{class:e.normalizeClass(["lp-checkbox",[`lp-checkbox--${f.value}`,{"is-disabled":y.value,"is-checked":c.value,"is-midway":m.midway}]])},[e.createElementVNode("span",Yt,[e.createElementVNode("input",{ref_key:"inputRef",ref:l,type:"checkbox",class:"lp-checkbox__original",value:m.label||m.trueLabel,name:m.name,disabled:y.value,checked:c.value,midway:m.midway,onChange:B,onFocus:E[0]||(E[0]=v=>a.value=!0),onBlur:E[1]||(E[1]=v=>a.value=!1)},null,40,Xt),E[2]||(E[2]=e.createElementVNode("span",{class:"lp-checkbox__inner"},null,-1))]),m.$slots.default||m.label?(e.openBlock(),e.createElementBlock("span",qt,[e.renderSlot(m.$slots,"default",{},()=>[e.createTextVNode(e.toDisplayString(m.label),1)])])):e.createCommentVNode("",!0)],2))}}),Jt=["aria-label"],Zt={name:"LpCheckboxGroup"},_e=e.defineComponent({...Zt,props:{modelValue:{default:()=>[]},options:{default:()=>[]},disabled:{type:Boolean,default:!1},size:{default:"default"},min:{default:0},max:{default:1/0},ariaLabel:{}},emits:["update:modelValue","change"],setup(o,{expose:t,emit:s}){const n=o,l=s,a=e.computed(()=>n.modelValue||[]),r=y=>{y.length<n.min||y.length>n.max||(l("update:modelValue",y),l("change",y))},u=y=>a.value.includes(y)?!1:a.value.length>=n.max,c=e.computed(()=>a.value.length<=n.min),f={modelValue:e.toRef(n,"modelValue"),disabled:e.toRef(n,"disabled"),size:e.toRef(n,"size"),min:e.toRef(n,"min"),max:e.toRef(n,"max"),changeEvent:r};return e.provide("checkboxGroup",f),t({isMinimumReached:c,isLimitExceeded:u}),(y,B)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["lp-checkbox-group",[`lp-checkbox-group--${y.size}`,{"is-disabled":y.disabled}]]),role:"group","aria-label":y.ariaLabel},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(y.options,m=>(e.openBlock(),e.createBlock(de,{key:m.value,label:m.value,disabled:m.disabled||y.disabled||u(m.value),size:y.size},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(m.label),1)]),_:2},1032,["label","disabled","size"]))),128)),e.renderSlot(y.$slots,"default")],10,Jt))}}),Qt=Object.freeze(Object.defineProperty({__proto__:null,LpCheckbox:de,LpCheckboxGroup:_e,default:{install:o=>{o.component(de.name,de),o.component(_e.name,_e)},LpCheckbox:de,LpCheckboxGroup:_e}},Symbol.toStringTag,{value:"Module"})),eo={name:"lp-empty"},to={class:"m-empty"};function oo(o,t,s,n,l,a){return e.openBlock(),e.createElementBlock("div",to," 数据为空! ")}const Ye=ce(eo,[["render",oo]]),no=Object.freeze(Object.defineProperty({__proto__:null,default:{install:o=>{o.component(Ye.name,Ye)}}},Symbol.toStringTag,{value:"Module"})),lo={name:"LpForm"},Te=e.defineComponent({...lo,props:{model:{},rules:{},inline:{type:Boolean,default:!1},labelPosition:{default:"right"},labelWidth:{},labelSuffix:{default:""},hideRequiredAsterisk:{type:Boolean,default:!1},showMessage:{type:Boolean,default:!0},inlineMessage:{type:Boolean,default:!1},statusIcon:{type:Boolean,default:!1},validateOnRuleChange:{type:Boolean,default:!0},size:{default:"default"},disabled:{type:Boolean,default:!1}},emits:["validate"],setup(o,{expose:t,emit:s}){const n=o,l=s,a=e.ref([]),r=E=>{a.value.push(E)},u=E=>{const v=a.value.indexOf(E);v>-1&&a.value.splice(v,1)},c=async(E,v)=>{const O=a.value.find(V=>V.prop===E);if(!O)return console.warn(`[LpForm] 找不到字段 ${E}`),!1;try{return await O.validate(),v==null||v(!0,""),!0}catch(V){const w=V.message||"验证失败";return v==null||v(!1,w),!1}},f=async E=>{const v=await Promise.allSettled(a.value.map(w=>w.validate())),O=v.every(w=>w.status==="fulfilled"),V=v.filter(w=>w.status==="rejected").map(w=>w.reason.message).join("; ");return E==null||E(O,V),O},y=()=>{a.value.forEach(E=>{E.resetField()})},B=E=>{const v=E?Array.isArray(E)?E:[E]:[];a.value.forEach(O=>{(!E||v.includes(O.prop))&&O.clearValidate()})},m=async()=>{await f()};return e.computed(()=>typeof n.labelWidth=="number"?`${n.labelWidth}px`:n.labelWidth||"auto"),e.provide("lpForm",{props:n,addFormItem:r,removeFormItem:u,validateField:c,emit:l}),t({validate:f,validateField:c,resetFields:y,clearValidate:B}),(E,v)=>(e.openBlock(),e.createElementBlock("form",{class:e.normalizeClass(["lp-form",{"lp-form--inline":E.inline,"lp-form--disabled":E.disabled}]),onSubmit:e.withModifiers(m,["prevent"])},[e.renderSlot(E.$slots,"default")],34))}}),so=["for"],ao={key:0,class:"lp-form-item__label-suffix"},ro={class:"lp-form-item__content"},io={name:"LpFormItem"},Ve=e.defineComponent({...io,props:{label:{},labelWidth:{},prop:{},required:{type:Boolean},rules:{},error:{},showMessage:{type:Boolean,default:!0},inlineMessage:{type:Boolean,default:!1},size:{default:"default"},for:{}},setup(o,{expose:t}){const s=o,n=e.inject("lpForm",null),l=e.ref(""),a=e.ref(""),r=e.ref(!1),u=e.computed(()=>{var i;return((i=n==null?void 0:n.props)==null?void 0:i.labelPosition)||"right"}),c=e.computed(()=>{var i;return s.size||((i=n==null?void 0:n.props)==null?void 0:i.size)||"default"}),f=e.computed(()=>s.required!==void 0?s.required:v().some(d=>d.required)),y=e.computed(()=>{var i;return((i=n==null?void 0:n.props)==null?void 0:i.labelSuffix)||""}),B=e.computed(()=>{var i;return l.value==="error"&&s.showMessage&&(((i=n==null?void 0:n.props)==null?void 0:i.showMessage)??!0)}),m=e.computed(()=>{var b;const i={};if(u.value==="top")return i;const d=s.labelWidth||((b=n==null?void 0:n.props)==null?void 0:b.labelWidth);return d&&(i.width=typeof d=="number"?`${d}px`:d),i}),E=e.computed(()=>s.for||`lp-form-item-${Math.random().toString(36).substr(2,9)}`),v=()=>{var C;const i=(C=n==null?void 0:n.props)==null?void 0:C.rules,d=s.rules,b=[];if(i&&s.prop){const S=i[s.prop];S&&b.push(...Array.isArray(S)?S:[S])}return d&&b.push(...Array.isArray(d)?d:[d]),b},O=()=>{var d;const i=(d=n==null?void 0:n.props)==null?void 0:d.model;if(!(!i||!s.prop))return i[s.prop]},V=async i=>{if(!s.prop)return Promise.resolve();const d=v();if(!d.length)return Promise.resolve();const b=i?d.filter(S=>!S.trigger||S.trigger===i):d;if(!b.length)return Promise.resolve();l.value="validating",r.value=!0;const C=O();return new Promise((S,$)=>{let g=0;const L=b.length,D=(G,H)=>{var Y,k;if(G)g++;else{l.value="error",a.value=H||"验证失败",r.value=!1,(Y=n==null?void 0:n.emit)==null||Y.call(n,"validate",s.prop,!1,H||""),$(new Error(H||"验证失败"));return}g===L&&(l.value="success",a.value="",r.value=!1,(k=n==null?void 0:n.emit)==null||k.call(n,"validate",s.prop,!0,""),S())};b.forEach(G=>{w(G,C,D)})})},w=(i,d,b)=>{if(i.required&&(d==null||d==="")){b(!1,i.message||"该字段为必填项");return}if((d==null||d==="")&&!i.required){b(!0);return}if(i.min!==void 0||i.max!==void 0||i.len!==void 0){const C=String(d).length;if(i.len!==void 0&&C!==i.len){b(!1,i.message||`长度必须为 ${i.len} 个字符`);return}if(i.min!==void 0&&C<i.min){b(!1,i.message||`长度不能少于 ${i.min} 个字符`);return}if(i.max!==void 0&&C>i.max){b(!1,i.message||`长度不能超过 ${i.max} 个字符`);return}}if(i.pattern&&!i.pattern.test(String(d))){b(!1,i.message||"格式不正确");return}if(i.validator){i.validator(i,d,C=>{b(!C,C==null?void 0:C.message)});return}b(!0)},_=()=>{var d;l.value="",a.value="",r.value=!1;const i=(d=n==null?void 0:n.props)==null?void 0:d.model;i&&s.prop&&(i[s.prop]=void 0)},h=()=>{l.value="",a.value="",r.value=!1},p={prop:s.prop||"",validate:V,resetField:_,clearValidate:h};return e.onMounted(()=>{var i;s.prop&&((i=n==null?void 0:n.addFormItem)==null||i.call(n,p))}),e.onUnmounted(()=>{var i;s.prop&&((i=n==null?void 0:n.removeFormItem)==null||i.call(n,p))}),e.watch(()=>s.error,i=>{i?(l.value="error",a.value=i):(l.value="",a.value="")},{immediate:!0}),t({validate:V,resetField:_,clearValidate:h}),(i,d)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["lp-form-item",{"lp-form-item--error":l.value==="error","lp-form-item--success":l.value==="success","lp-form-item--validating":l.value==="validating","lp-form-item--required":f.value,[`lp-form-item--${u.value}`]:u.value,[`lp-form-item--${c.value}`]:c.value}])},[i.label||i.$slots.label?(e.openBlock(),e.createElementBlock("label",{key:0,class:"lp-form-item__label",style:e.normalizeStyle(m.value),for:E.value},[e.renderSlot(i.$slots,"label",{},()=>[e.createTextVNode(e.toDisplayString(i.label),1)]),y.value?(e.openBlock(),e.createElementBlock("span",ao,e.toDisplayString(y.value),1)):e.createCommentVNode("",!0)],12,so)):e.createCommentVNode("",!0),e.createElementVNode("div",ro,[e.renderSlot(i.$slots,"default"),e.createVNode(e.Transition,{name:"lp-zoom-in-top"},{default:e.withCtx(()=>[B.value?(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass(["lp-form-item__error",{"lp-form-item__error--inline":i.inlineMessage}])},e.toDisplayString(a.value),3)):e.createCommentVNode("",!0)]),_:1})])],2))}}),co=Object.freeze(Object.defineProperty({__proto__:null,LpForm:Te,LpFormItem:Ve,default:{install:o=>{o.component(Te.name,Te),o.component(Ve.name,Ve)}}},Symbol.toStringTag,{value:"Module"})),po={key:0,class:"lp-input__prepend"},uo={class:"lp-input__wrapper"},fo={key:0,class:"lp-input__prefix"},mo=["type","value","placeholder","disabled","readonly","maxlength","minlength","autocomplete","name","form","tabindex"],ho={key:1,class:"lp-input__suffix"},go={key:1,class:"lp-input__append"},yo={name:"LpInput"},Xe=e.defineComponent({...yo,props:{modelValue:{},type:{default:"text"},placeholder:{},disabled:{type:Boolean},readonly:{type:Boolean},clearable:{type:Boolean},showPassword:{type:Boolean},prefixIcon:{},suffixIcon:{},maxlength:{},minlength:{},autocomplete:{},name:{},form:{},tabindex:{},size:{default:"default"},validateEvent:{type:Boolean,default:!0}},emits:["update:modelValue","input","change","focus","blur","clear","keydown","keyup"],setup(o,{expose:t,emit:s}){const n=o,l=s,a=e.inject("lpFormItem",null),r=e.ref(),u=e.ref(!1);e.ref(!1);const c=e.ref(!1),f=e.ref(!1),y=e.computed(()=>n.size||(a==null?void 0:a.size)||"default"),B=async()=>{var g;await e.nextTick(),(g=r.value)==null||g.focus()},m=()=>{var g;(g=r.value)==null||g.blur()},E=()=>{var g;(g=r.value)==null||g.select()},v=()=>{var g;l("update:modelValue",""),l("input",""),l("change",""),l("clear"),n.validateEvent&&((g=a==null?void 0:a.validate)==null||g.call(a,"change"))},O=g=>{var G;const L=g.target;let{value:D}=L;c.value||(l("update:modelValue",D),l("input",D),n.validateEvent&&((G=a==null?void 0:a.validate)==null||G.call(a,"input")))},V=g=>{var G;const L=g.target,{value:D}=L;l("change",D),n.validateEvent&&((G=a==null?void 0:a.validate)==null||G.call(a,"change"))},w=g=>{u.value=!0,l("focus",g)},_=g=>{var L;u.value=!1,l("blur",g),n.validateEvent&&((L=a==null?void 0:a.validate)==null||L.call(a,"blur"))},h=()=>{u.value||B()},p=g=>{g.stopPropagation(),v()},i=()=>{f.value=!f.value,B()},d=g=>{l("keydown",g)},b=g=>{l("keyup",g)},C=()=>{c.value=!0},S=()=>{},$=g=>{c.value=!1,O(g)};return t({focus:B,blur:m,select:E,clear:v,input:r}),(g,L)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["lp-input",{"lp-input--disabled":g.disabled,"lp-input--readonly":g.readonly,"lp-input--clearable":g.clearable&&!g.disabled&&!g.readonly,"lp-input--prefix":g.$slots.prefix||g.prefixIcon,"lp-input--suffix":g.$slots.suffix||g.suffixIcon||g.clearable||g.showPassword,"lp-input--password":g.showPassword,[`lp-input--${y.value}`]:y.value}]),onClick:h},[g.$slots.prepend?(e.openBlock(),e.createElementBlock("div",po,[e.renderSlot(g.$slots,"prepend")])):e.createCommentVNode("",!0),e.createElementVNode("div",uo,[g.$slots.prefix||g.prefixIcon?(e.openBlock(),e.createElementBlock("span",fo,[e.renderSlot(g.$slots,"prefix",{},()=>[g.prefixIcon?(e.openBlock(),e.createElementBlock("i",{key:0,class:e.normalizeClass(g.prefixIcon)},null,2)):e.createCommentVNode("",!0)])])):e.createCommentVNode("",!0),e.createElementVNode("input",{ref_key:"inputRef",ref:r,class:"lp-input__inner",type:f.value?"text":g.type,value:g.modelValue,placeholder:g.placeholder,disabled:g.disabled,readonly:g.readonly,maxlength:g.maxlength,minlength:g.minlength,autocomplete:g.autocomplete,name:g.name,form:g.form,tabindex:g.tabindex,onInput:O,onChange:V,onFocus:w,onBlur:_,onKeydown:d,onKeyup:b,onCompositionstart:C,onCompositionupdate:S,onCompositionend:$},null,40,mo),g.$slots.suffix||g.suffixIcon||g.clearable||g.showPassword?(e.openBlock(),e.createElementBlock("span",ho,[e.renderSlot(g.$slots,"suffix",{},()=>[g.clearable&&!g.disabled&&!g.readonly&&g.modelValue?(e.openBlock(),e.createElementBlock("i",{key:0,class:"lp-input__clear lp-icon-circle-close",onClick:p})):e.createCommentVNode("",!0),g.showPassword?(e.openBlock(),e.createElementBlock("i",{key:1,class:e.normalizeClass(["lp-input__password",f.value?"lp-icon-view":"lp-icon-hide"]),onClick:i},null,2)):e.createCommentVNode("",!0),g.suffixIcon?(e.openBlock(),e.createElementBlock("i",{key:2,class:e.normalizeClass(g.suffixIcon)},null,2)):e.createCommentVNode("",!0)])])):e.createCommentVNode("",!0)]),g.$slots.append?(e.openBlock(),e.createElementBlock("div",go,[e.renderSlot(g.$slots,"append")])):e.createCommentVNode("",!0)],2))}}),_o={class:"lp-input-number__input-box"},bo={key:0,class:"lp-input-number__prepend"},wo=["value","placeholder","disabled","readonly","name","autocomplete"],ko={key:1,class:"lp-input-number__append"},Eo={key:2,class:"lp-input-number__controls"},Co={name:"LpInputNumber"},qe=e.defineComponent({...Co,props:{modelValue:{},min:{},max:{},step:{default:1},stepStrictly:{type:Boolean},precision:{},size:{default:"default"},disabled:{type:Boolean},readonly:{type:Boolean},controls:{type:Boolean,default:!0},controlsPosition:{},name:{},placeholder:{},autocomplete:{default:"off"},validateEvent:{type:Boolean,default:!0}},emits:["update:modelValue","change","input","focus","blur"],setup(o,{expose:t,emit:s}){const n=o,l=s,a=e.inject("lpFormItem",null),r=e.ref(),u=e.ref(null),c=e.ref(!1),f=e.ref(null),y=e.computed(()=>n.size||(a==null?void 0:a.size)||"default"),B=e.computed(()=>{if(n.precision!==void 0)return n.precision;const k=O(n.step),x=O(n.modelValue);return Math.max(k,x)}),m=e.computed(()=>u.value!==null?u.value:n.modelValue===void 0||n.modelValue===null?"":typeof n.modelValue=="number"?n.modelValue.toFixed(B.value):String(n.modelValue)),E=e.computed(()=>n.disabled||n.max!==void 0&&n.modelValue!==void 0&&n.modelValue>=n.max),v=e.computed(()=>n.disabled||n.min!==void 0&&n.modelValue!==void 0&&n.modelValue<=n.min),O=k=>{if(k===void 0)return 0;const x=k.toString(),U=x.indexOf(".");return U!==-1?x.length-U-1:0},V=(k,x)=>(x===void 0&&(x=B.value),parseFloat(Math.round(k*Math.pow(10,x))/Math.pow(10,x)+"")),w=k=>V(k,B.value),_=k=>n.max!==void 0&&k>n.max?n.max:n.min!==void 0&&k<n.min?n.min:k,h=k=>n.stepStrictly?(O(n.step),Math.round(k/n.step)*n.step):k,p=()=>{var k;(k=r.value)==null||k.focus()},i=()=>{var k;(k=r.value)==null||k.blur()},d=()=>{var k;(k=r.value)==null||k.select()},b=()=>{if(E.value)return;const k=n.modelValue||0,x=_(w(k+n.step));S(x)},C=()=>{if(v.value)return;const k=n.modelValue||0,x=_(w(k-n.step));S(x)},S=k=>{var U;const x=n.modelValue;k!==void 0&&(k=h(w(k)),k=_(k)),x!==k&&(u.value=null,l("update:modelValue",k),l("change",k,x),n.validateEvent&&((U=a==null?void 0:a.validate)==null||U.call(a,"change")))},$=k=>{const U=k.target.value;if(u.value=U,U===""){l("update:modelValue",void 0),l("input",void 0);return}const P=Number(U);isNaN(P)||l("input",P)},g=()=>{const k=u.value;if(k===null||k===""){S(void 0);return}const x=Number(k);if(isNaN(x)){u.value=null;return}S(x)},L=k=>{c.value=!0,l("focus",k)},D=k=>{var x;c.value=!1,u.value=null,l("blur",k),n.validateEvent&&((x=a==null?void 0:a.validate)==null||x.call(a,"blur"))},G=k=>{switch(k.key){case"ArrowUp":k.preventDefault(),b();break;case"ArrowDown":k.preventDefault(),C();break}},H=(k,x)=>{if(x.button!==0)return;const U=k==="increase"?b:C;U(),f.value=setTimeout(()=>{const P=setInterval(U,100),I=()=>{clearInterval(P),document.removeEventListener("mouseup",I)};document.addEventListener("mouseup",I)},300)},Y=()=>{f.value&&(clearTimeout(f.value),f.value=null)};return e.watch(()=>n.modelValue,k=>{u.value=null},{immediate:!0}),t({focus:p,blur:i,select:d,increase:b,decrease:C}),(k,x)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["lp-input-number",{"lp-input-number--disabled":k.disabled,"lp-input-number--controls-right":k.controlsPosition==="right",[`lp-input-number--${y.value}`]:y.value}])},[k.controlsPosition!=="right"?(e.openBlock(),e.createElementBlock("span",{key:0,class:e.normalizeClass(["lp-input-number__decrease",{"lp-input-number__decrease--disabled":v.value}]),onMousedown:x[0]||(x[0]=U=>H("decrease",U)),onMouseup:Y,onMouseleave:Y},x[4]||(x[4]=[e.createElementVNode("i",{class:"lp-input-number__decrease-icon text"},"-",-1)]),34)):e.createCommentVNode("",!0),e.createElementVNode("div",_o,[k.$slots.prepend?(e.openBlock(),e.createElementBlock("div",bo,[e.renderSlot(k.$slots,"prepend")])):e.createCommentVNode("",!0),e.createElementVNode("input",{ref_key:"inputRef",ref:r,class:e.normalizeClass(["lp-input-number__inner",{"lp-input-number__inner--with-prepend":k.$slots.prepend,"lp-input-number__inner--with-append":k.$slots.append}]),type:"text",value:m.value,placeholder:k.placeholder,disabled:k.disabled,readonly:k.readonly,name:k.name,autocomplete:k.autocomplete,onInput:$,onChange:g,onFocus:L,onBlur:D,onKeydown:G},null,42,wo),k.$slots.append?(e.openBlock(),e.createElementBlock("div",ko,[e.renderSlot(k.$slots,"append")])):e.createCommentVNode("",!0)]),k.controlsPosition!=="right"?(e.openBlock(),e.createElementBlock("span",{key:1,class:e.normalizeClass(["lp-input-number__increase",{"lp-input-number__increase--disabled":E.value}]),onMousedown:x[1]||(x[1]=U=>H("increase",U)),onMouseup:Y,onMouseleave:Y},x[5]||(x[5]=[e.createElementVNode("i",{class:"lp-input-number__increase-icon text"},"+",-1)]),34)):e.createCommentVNode("",!0),k.controlsPosition==="right"?(e.openBlock(),e.createElementBlock("div",Eo,[e.createElementVNode("span",{class:e.normalizeClass(["lp-input-number__increase",{"lp-input-number__increase--disabled":E.value}]),onMousedown:x[2]||(x[2]=U=>H("increase",U)),onMouseup:Y,onMouseleave:Y},x[6]||(x[6]=[e.createElementVNode("i",{class:"lp-input-number__increase-icon"},"▲",-1)]),34),e.createElementVNode("span",{class:e.normalizeClass(["lp-input-number__decrease",{"lp-input-number__decrease--disabled":v.value}]),onMousedown:x[3]||(x[3]=U=>H("decrease",U)),onMouseup:Y,onMouseleave:Y},x[7]||(x[7]=[e.createElementVNode("i",{class:"lp-input-number__decrease-icon"},"▼",-1)]),34)])):e.createCommentVNode("",!0)],2))}}),$o=Object.freeze(Object.defineProperty({__proto__:null,default:{install:o=>{o.component(Xe.name,Xe),o.component(qe.name,qe)}}},Symbol.toStringTag,{value:"Module"})),Bo=e.defineComponent({__name:"base",props:{name:{type:String,default:""},disabled:{type:Boolean,default:!1}},emits:["enter","leave","afterEnter"],setup(o,{emit:t}){const s=t,n=c=>{c instanceof HTMLElement&&(c.getBoundingClientRect(),e.nextTick(()=>{const f=c.offsetHeight,y=c.offsetWidth;s("enter",c,{height:f,width:y})}))},l=c=>{c instanceof HTMLElement&&(c.style.overflowY="",c.style.overflowX=""),s("afterEnter",c)},a=c=>{},r=c=>{s("leave",c)},u=c=>{s("leave",c)};return e.onMounted(()=>{}),(c,f)=>(e.openBlock(),e.createBlock(e.Transition,{name:o.name,onBeforeEnter:n,onAfterEnter:l,onBeforeLeave:a,onAfterLeave:r,onLeaveCancelled:u},{default:e.withCtx(()=>[e.renderSlot(c.$slots,"default")]),_:3},8,["name"]))}});function So(){const o=e.ref(null),t=e.ref(null),s=e.ref(null),n=e.ref(null),l=e.ref(8),a=e.reactive({x:0,y:0,width:0,height:0}),r=e.reactive({position:"absolute",width:"14px",height:"14px",backgroundColor:"#fff",transform:"rotate(45deg)"}),u=e.ref(!1);function c(){var d;if(!((d=t.value)!=null&&d.arrow)||!n.value)return;const p=t.value.arrowSize||l.value,[,i="center"]=(t.value.position||"bottom-center").split("-");switch(Object.assign(r,{position:"absolute",width:`${p}px`,height:`${p}px`,transform:"rotate(45deg)",top:"",left:"",right:"",bottom:"",marginTop:"",marginLeft:"",marginRight:"",marginBottom:""}),n.value){case"top":if(r.bottom=`-${p/2}px`,i==="start"){const b=a.width/2;r.left=`${b}px`,r.marginLeft=`-${p/2}px`}else if(i==="end"){const b=a.width/2;r.right=`${b}px`,r.marginRight=`-${p/2}px`}else r.left="50%",r.marginLeft=`-${p/2}px`;break;case"right":if(r.left=`-${p/2}px`,i==="start"){const b=a.height/2;r.top=`${b}px`,r.marginTop=`-${p/2}px`}else if(i==="end"){const b=a.height/2;r.bottom=`${b}px`,r.marginBottom=`-${p/2}px`}else r.top="50%",r.marginTop=`-${p/2}px`;break;case"bottom":if(r.top=`-${p/2}px`,i==="start"){const b=a.width/2;r.left=`${b}px`,r.marginLeft=`-${p/2}px`}else if(i==="end"){const b=a.width/2;r.right=`${b}px`,r.marginRight=`-${p/2}px`}else r.left="50%",r.marginLeft=`-${p/2}px`;break;case"left":if(r.right=`-${p/2}px`,i==="start"){const b=a.height/2;r.top=`${b}px`,r.marginTop=`-${p/2}px`}else if(i==="end"){const b=a.height/2;r.bottom=`${b}px`,r.marginBottom=`-${p/2}px`}else r.top="50%",r.marginTop=`-${p/2}px`;break}}function f(p){return p.getBoundingClientRect()}function y(p,i,d,b){switch(b){case"start":return p;case"end":return p+i-d;case"center":default:return p+(i-d)/2}}function B(p,i,d,b){switch(b){case"start":return p;case"end":return p+i-d;case"center":default:return p+(i-d)/2}}function m(p,i,d,b,C,S){let $=0;return p<0&&($+=Math.abs(p)),p+d>C&&($+=p+d-C),i<0&&($+=Math.abs(i)),i+b>S&&($+=i+b-S),$}function E(p,i,d,b,C){const S=p.map($=>{const g=m($.x,$.y,i,d,b,C);return{...$,overflow:g}});return S.sort(($,g)=>$.overflow-g.overflow),S[0]}function v(p,i,d,b,C,S,$){if(!C||!t.value){console.error("calculateFollowPosition - missing container or options:",{container:!!C,options:!!t.value});return}a.x=p+d/2,a.y=i+b/2,a.width=d,a.height=b;const g=C.getBoundingClientRect(),L=g.width,D=g.height;if(L===0||D===0){setTimeout(()=>{v(p,i,d,b,C,S,$)},100);return}const G=window.innerWidth,H=window.innerHeight,[Y,k="center"]=t.value.position.split("-");let x=[];const U=t.value.arrowSize||l.value,P=t.value.arrow?U:0,I={left:{x:p-L-P,y:B(i,b,D,k)},right:{x:p+d+P,y:B(i,b,D,k)},top:{x:y(p,d,L,k),y:i-D-P},bottom:{x:y(p,d,L,k),y:i+b+P}},Ce=I[Y];Ce&&x.push({direction:Y,...Ce});const re=["top","right","bottom","left"];let ye=re.indexOf(Y);if(ye!==-1)for(let T=1;T<re.length;T++){const R=re[(ye+T)%re.length];x.push({direction:R,...I[R]})}const ie=E(x,L,D,G,H);n.value=ie.direction,c(),S.left=`${ie.x}px`,S.top=`${ie.y}px`,S.transform="",S.right="",S.bottom="",$&&$()}function O(p,i,d,b){if(!t.value)return;const{clientX:C,clientY:S}=p;v(C,S,0,0,i,d,b)}function V(p,i,d){if(!o.value){console.error("updateFollowPosition - no follow target set");return}if(typeof o.value!="string"){if(!t.value){console.error("updateFollowPosition - missing follow options");return}try{if(!(o.value instanceof HTMLElement)){console.error("updateFollowPosition - target is not an HTMLElement:",o.value);return}if(!document.body.contains(o.value)){console.error("updateFollowPosition - target not in document");return}const b=f(o.value),{x:C,y:S,width:$,height:g}=b;v(C,S,$,g,p,i,d)}catch(b){console.error("updateFollowPosition - error calculating position:",b)}}}function w(p,i,d){var g;s.value&&cancelAnimationFrame(s.value);const C=1e3/(((g=t.value)==null?void 0:g.fps)||60);let S=0;const $=L=>{s.value=requestAnimationFrame($),!(L-S<C)&&(S=L,V(p,i,d))};s.value=requestAnimationFrame($)}function _(p,i,d,b){var C;return p?(o.value=p.target,t.value=p.options,u.value=((C=t.value)==null?void 0:C.arrow)||!1,t.value.arrow&&(l.value=t.value.arrowSize||8,c()),typeof o.value=="string"&&o.value==="mouse"?window.addEventListener("mousemove",S=>O(S,i,d,b)):(V(i,d,b),t.value&&t.value.fps?w(i,d,b):(window.addEventListener("resize",()=>V(i,d,b)),window.addEventListener("scroll",()=>V(i,d,b),!0))),!0):!1}function h(){window.removeEventListener("mousemove",O),window.removeEventListener("resize",V),window.removeEventListener("scroll",V,!0),s.value&&(cancelAnimationFrame(s.value),s.value=null)}return{followTarget:o,followOptions:t,followAnimationFrame:s,arrowDirection:n,arrowSize:l,arrowStyle:r,targetCenter:a,showArrow:u,initFollow:_,updateFollowPosition:V,updateArrowStyle:c,cleanup:h}}function vo(o){return new Promise((t,s)=>{let n;const l=()=>{const a=o();a!==void 0?(cancelAnimationFrame(n),t(a)):n=requestAnimationFrame(l)};n=requestAnimationFrame(l)})}function Ke(o,t="px"){return o?typeof o=="string"?o:`${o}${t}`:""}function Je(o,t){console.warn(`[${o}] ${t}`)}function To(o,t){throw new Error(`[${o}] ${t}`)}function be(o){return typeof o=="number"}function Vo(o){return o!==null&&typeof o=="object"}function Ze(o,t){let s=Array.isArray(o)?[...o]:[o],n=!1,l=!1;const a=()=>{const f=[];for(const y of s)typeof y=="string"?document.querySelectorAll(y).forEach(B=>f.push(B)):y instanceof HTMLElement&&f.push(y);return f},r=f=>{n=a().some(B=>B.contains(f.target))},u=f=>{if(!l)return;const B=a().some(m=>m.contains(f.target));(!n||!B)&&t()},c=()=>{l&&t()};return document.addEventListener("mousedown",r),document.addEventListener("click",u),window.addEventListener("blur",c),setTimeout(()=>{l=!0},0),{unbind:()=>{document.removeEventListener("mousedown",r),document.removeEventListener("click",u),window.removeEventListener("blur",c)},appendSelector:f=>{const y=Array.isArray(f)?f:[f];s.push(...y)}}}const xo={name:"lp-layer"},jo=e.defineComponent({...xo,props:{position:{type:Object,default:()=>({})},zIndex:{type:Number,default:1e3},transition:{type:String,default:"fade"},layerObj:{type:Object,default:()=>({getTransitionComponent:()=>null})},follow:{type:[Object,null],default:null},enableResizeTransition:{type:Boolean,default:!0}},emits:["after-leave","close"],setup(o,{expose:t,emit:s}){const n=e.getCurrentInstance(),l=o,a=s,r=e.ref(!1),u=e.ref(null),c=e.ref(null),f=e.ref(!1),y=e.ref(!1),{showArrow:B,arrowStyle:m,initFollow:E,updateFollowPosition:v,cleanup:O}=So();l.follow&&l.follow.target&&(f.value=!0);const V=[],w=e.ref(!1),_=e.reactive({zIndex:l.zIndex,position:"fixed"}),h=e.reactive({});l.layerObj.options.useBodyScroll&&(h["overflow-x"]="auto",h["overflow-y"]="auto");let p=null;l.layerObj.getTransitionComponent()?p=l.layerObj.getTransitionComponent():p=Bo;const i=e.ref("");let d={enter:!1,width:0,height:0};const b=e.ref(!1);function C(){i.value=`lp-${l.transition}`}C();function S(T){d.enter=!0,d.width=T.offsetWidth,d.height=T.offsetHeight}function $(T){b.value=!0}async function g(T){return T.zIndex="-100",T.opacity="0",Object.assign(_,T),await vo(()=>{if(d.enter)return!0}),d}const L=e.ref(!1),D=1;async function G(){var oe;const{width:T,height:R,x:z,y:N,reverse:J}=l.position||{},j={zIndex:l.zIndex,position:"fixed",transform:"",top:"",left:"",right:"",bottom:"",width:"",height:""};T&&(j.width=typeof T=="number"?`${T}px`:T),R&&(j.height=typeof R=="number"?`${R}px`:R);let q=[];J?(z==="center"||z===void 0?(j.left="50%",q.push("translateX(-50%)")):z==="right"?j.right="0":typeof z=="number"?j.right=`${z}px`:z?j.right=z:j.left="0",N==="center"||N===void 0?(j.top="50%",q.push("translateY(-50%)")):N==="top"?j.top="50px":N==="bottom"?j.bottom="0":typeof N=="number"?j.bottom=`${N}px`:N?j.bottom=N:j.top="0"):(z==="center"||z===void 0?(j.left="50%",q.push("translateX(-50%)")):z==="right"?j.right="0":typeof z=="number"?j.left=`${z}px`:z?j.left=z:j.left="0",N==="center"||N===void 0?(j.top="50%",q.push("translateY(-50%)")):N==="top"?j.top="50px":N==="bottom"?j.bottom="50px":typeof N=="number"?j.top=`${N}px`:N?j.top=N:j.top="0"),q.length>0&&(j.transform=q.join(" ")),(oe=l.layerObj.options)!=null&&oe.group?(await g(j),e.nextTick(()=>{var ne;(ne=l.layerObj.options)!=null&&ne.group&&l.layerObj.options.group.computePosition(j,l.layerObj)})):(T==="auto"||!T||R=="auto"||!R||z=="center"||!z||N=="center"||!N)&&(await g(j),k(j)),j.opacity="1",j.zIndex=l.zIndex,Object.assign(_,j)}const H=e.ref(null);async function Y(){r.value=!0,_.opacity="0",l.follow&&l.follow.target?E(l.follow,c.value,_,()=>{y.value||(y.value=!0,_.opacity="1",setTimeout(()=>{f.value=!1},50))}):(await G(),y.value=!0,_.opacity="1")}function k(T,R=!1){var $e,ee;const z=($e=T.transform)==null?void 0:$e.includes("translateX(-50%)"),N=(ee=T.transform)==null?void 0:ee.includes("translateY(-50%)");if(!R&&!z&&!N||!d.width||!d.height)return;const J=d.width,j=d.height,q=window.innerWidth,oe=window.innerHeight;let ne=[];T.transform&&T.transform.split(" ").forEach(Be=>{Be.includes("translate")||ne.push(Be)}),(z||R)&&(Math.abs(J-q)<=1||J>=q?T.left="0":T.left=`calc(50% - ${Math.floor(J/2)}px)`),(N||R)&&(Math.abs(j-oe)<=1||j>=oe?T.top="0":T.top=`calc(50% - ${Math.floor(j/2)}px)`),ne.length>0?T.transform=ne.join(" "):T.transform=""}const x=(T="layer")=>{r.value=!1,w.value=!0,l.follow&&l.follow.target&&O(),a("close"),V.forEach(({event:R,callback:z})=>{R==="close"&&z&&z()})};function U(){w.value=!1,a("after-leave")}l.layerObj.setLayerInstance(n);let P=null,I=null;e.ref(!1);function Ce(){if(P)return;const{width:T,height:R}=l.position||{};P=new ResizeObserver(async z=>{if(!L.value)for(const N of z){const J=N.contentRect.width,j=N.contentRect.height,q=d.width,oe=d.height,ne=Math.abs(J-q),$e=Math.abs(j-oe);if(ne>D||$e>D){if(d.width=J,d.height=j,l.follow&&l.follow.target)v(c.value,_);else if(y.value){const ee={..._},Be=l.enableResizeTransition&&q>0&&oe>0,{width:sr,height:ar}=l.position||{};Be?(L.value=!0,P&&I&&P.unobserve(I),ee.transition="left 0.3s, top 0.3s, width 0.3s, height 0.3s",Object.assign(_,ee),k(ee,!0),requestAnimationFrame(()=>{Object.assign(_,ee)}),setTimeout(()=>{if(_.transition="",P&&I){P.observe(I);const Se=I.getBoundingClientRect(),Va=Math.abs(Se.width-d.width),xa=Math.abs(Se.height-d.height);if(Va>D||xa>D){d.width=Se.width,d.height=Se.height;const Dt={..._};k(Dt,!0),Object.assign(_,Dt)}}setTimeout(()=>{L.value=!1},50)},300)):(k(ee,!0),Object.assign(_,ee))}}}}),e.nextTick(()=>{const z=c.value;P&&z&&(I=z,P.observe(z))})}e.provide("lp-layer:core",{on:(T,R)=>{V.push({event:T,callback:R})},off:(T,R)=>{let z=V.findIndex(N=>N.event===T&&N.callback===R);z!==-1&&V.splice(z,1)}});function re(T){if(L.value){console.log("已在进行resize操作，忽略此次调用");return}L.value=!0;const R=parseInt(_.width)||d.width,z=parseInt(_.height)||d.height;P&&I&&(console.log("暂停尺寸检测，开始缩放"),P.unobserve(I));const N={..._};N.transition="width 0.3s ease, height 0.3s ease, left 0.3s ease, top 0.3s ease, right 0.3s ease, bottom 0.3s ease, transform 0.3s ease",console.log("resizeLayer",T);let J,j;typeof T=="number"?(J=Math.round(R*T),j=Math.round(z*T),N.width=`${J}px`,N.height=`${j}px`):(J=T.width,j=T.height,N.width=`${J}px`,N.height=`${j}px`),d.width,d.height,d.width=J,d.height=j,k(N,!0),Object.assign(_,N),setTimeout(()=>{if(_.transition="",P&&I){console.log("缩放结束，恢复尺寸检测"),P.observe(I);const q=I.getBoundingClientRect();d.width=q.width,d.height=q.height}setTimeout(()=>{L.value=!1},50)},300)}function ye(){if(L.value){console.log("已在进行resize操作，忽略此次全屏调用");return}L.value=!0,H.value||(H.value={width:_.width,height:_.height,left:_.left,top:_.top,right:_.right,bottom:_.bottom,transform:_.transform}),P&&I&&(console.log("暂停尺寸检测，开始全屏"),P.unobserve(I));const T={..._};T.transition="width 0.3s ease, height 0.3s ease, left 0.3s ease, top 0.3s ease, right 0.3s ease, bottom 0.3s ease, transform 0.3s ease",Object.assign(T,{width:"100vw",height:"100vh",left:"0",top:"0",right:"",bottom:"",transform:""}),d.width,d.height,d.width=window.innerWidth,d.height=window.innerHeight,Object.assign(_,T),setTimeout(()=>{if(_.transition="",P&&I){console.log("全屏结束，恢复尺寸检测"),P.observe(I);const R=I.getBoundingClientRect();d.width=R.width,d.height=R.height}setTimeout(()=>{L.value=!1},50)},300)}function ie(){if(!H.value)return;if(L.value){console.log("已在进行resize操作，忽略此次退出全屏调用");return}L.value=!0,P&&I&&(console.log("暂停尺寸检测，退出全屏"),P.unobserve(I));const T={..._};T.transition="width 0.3s ease, height 0.3s ease, left 0.3s ease, top 0.3s ease, right 0.3s ease, bottom 0.3s ease, transform 0.3s ease";const R=parseInt(H.value.width)||0,z=parseInt(H.value.height)||0;d.width=R||300,d.height=z||200,Object.assign(T,H.value),Object.assign(_,T),H.value=null,setTimeout(()=>{if(_.transition="",P&&I){console.log("退出全屏结束，恢复尺寸检测"),P.observe(I);const N=I.getBoundingClientRect();d.width=N.width,d.height=N.height}setTimeout(()=>{L.value=!1},50)},300)}return t({close:x,updatePosition:()=>{l.follow?v(c.value,_):G()},changeContainerStyle:T=>{Object.assign(_,T)},getContainerStyle:()=>_,getInstance:()=>n,toggleFullscreen:()=>{_.width==="100vw"&&_.height==="100vh"?ie():ye()},useFullscreen:()=>{ye()},exitFullscreen:()=>{ie()},resizeLayer:T=>{re(T)}}),e.onMounted(()=>{if(_.zIndex=l.zIndex,Y(),Ce(),l.layerObj.options.useOutsideClose){let T=Ze(c.value,()=>{a("close"),T.unbind()})}}),e.onBeforeUnmount(()=>{l.follow&&l.follow.target&&O(),P&&P.disconnect(),I=null}),(T,R)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["lp-layer-container",{closeing:w.value}]),style:e.normalizeStyle(_),ref_key:"containerRef",ref:c},[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(e.unref(p)),{name:i.value,disabled:f.value,onEnter:S,onAfterEnter:$,onLeave:U},{default:e.withCtx(()=>[e.withDirectives(e.createElementVNode("div",{class:"lp-layer",ref_key:"layerRef",ref:u},[l.follow&&e.unref(B)?(e.openBlock(),e.createElementBlock("div",{key:0,class:"lp-layer-arrow",style:e.normalizeStyle(e.unref(m))},null,4)):e.createCommentVNode("",!0),e.createElementVNode("div",{class:"lp-layer-body",style:e.normalizeStyle(h)},[e.renderSlot(T.$slots,"default")],4)],512),[[e.vShow,r.value]])]),_:3},40,["name","disabled"]))],6))}}),Oo={class:"lp-dialog"},Lo={class:"lp-dialog__header flex align-center justify-between"},No={class:"lp-dialog__title"},zo={class:"lp-dialog__body"},Mo={key:0,class:"lp-dialog__footer"},Qe={__name:"dialog",props:{title:{type:String,default:"title"},showClose:{type:Boolean,default:!0},showFooter:{type:Boolean,default:!1}},emits:["close","confirm","cancel"],setup(o,{emit:t}){const s=t,n=()=>{s("confirm"),l()},l=()=>{s("close")};return(a,r)=>(e.openBlock(),e.createElementBlock("div",Oo,[e.createElementVNode("div",Lo,[e.createElementVNode("div",No,e.toDisplayString(o.title),1),o.showClose?(e.openBlock(),e.createElementBlock("div",{key:0,class:"lp-dialog__close",onClick:l},[e.createVNode(e.unref(W.LpIcon),{class:"lp-dialog-close_icon",is:"close",size:"18px"})])):e.createCommentVNode("",!0)]),e.createElementVNode("div",zo,[e.renderSlot(a.$slots,"default")]),o.showFooter?(e.openBlock(),e.createElementBlock("div",Mo,[e.renderSlot(a.$slots,"footer",{},()=>[e.createElementVNode("button",{class:"btn btn-info",onClick:r[0]||(r[0]=(...u)=>a.handleCancel&&a.handleCancel(...u))},"取消"),e.createElementVNode("button",{class:"btn btn-primary",onClick:n},"确定")])])):e.createCommentVNode("",!0)]))}},Po={class:"lp-drawer__header"},Io={class:"lp-drawer__title"},Ro={class:"lp-drawer__body"},Ao={__name:"drawer",props:{title:{type:String,default:"抽屉"},showClose:{type:Boolean,default:!0},direction:{type:String,default:"right",validator:o=>["right","left","top","bottom"].includes(o)}},emits:["close"],setup(o,{emit:t}){const s=o,n=t,l=e.computed(()=>`lp-drawer--${s.direction}`),a=()=>{n("close")};return(r,u)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["lp-drawer",[l.value]])},[e.createElementVNode("div",Po,[e.createElementVNode("span",Io,e.toDisplayString(o.title),1),o.showClose?(e.openBlock(),e.createElementBlock("button",{key:0,class:"lp-drawer__close",onClick:a},"×")):e.createCommentVNode("",!0)]),e.createElementVNode("div",Ro,[e.renderSlot(r.$slots,"default")])],2))}},et={appContext:null},Do=e.defineComponent({__name:"mask",props:{zIndex:{type:Number,default:999},visible:{type:Boolean,default:!0}},emits:["click","mounted"],setup(o,{expose:t,emit:s}){const n=e.ref(!1),l=s,a=e.inject("lp-layer:core");function r(){n.value=!0}a.on("close",r);function u(f){l("click",f)}function c(f){console.log("setEventsNone",f),n.value=f}return t({setEventsNone:c}),e.onUnmounted(()=>{a.off("close",r)}),(f,y)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["lp-mask",{"pointer-events-none":n.value}]),style:e.normalizeStyle({zIndex:o.zIndex}),onClick:u},null,6))}});let we=!1,tt=0,le=[];function Fo(){if(we)return;we=!0,tt=window.scrollY||document.documentElement.scrollTop;const o=Wo();document.body.classList.add("lp-layer-lock-scroll"),document.body.style.width=`calc(100vw - ${o}px)`}function Wo(){return window.innerWidth-document.documentElement.clientWidth}function Uo(){we&&(we=!1,document.body.classList.remove("lp-layer-lock-scroll"),document.body.style.width="",window.scrollTo(0,tt))}function Ho(o){le.push(o),le.some(s=>ot(s))&&Fo()}function Go(o){let t=le.indexOf(o);t!==-1&&le.splice(t,1),!le.some(l=>ot(l))&&Uo()}function ot(o){return o.options.lockBodyScroll!==null?!!o.options.lockBodyScroll:!!o.options.useMask}function Yo(){return le}function ke(o){return le.filter(t=>t.options.group===o)}class Xo{constructor(t="x"){M(this,"mode","x");M(this,"justifyContent","start");M(this,"alignItems","start");M(this,"paddingSize",10);M(this,"spaceSize",16);M(this,"transitionDuration",300);M(this,"transitionTimingFunction","ease");M(this,"rowMaxWidth",0);M(this,"itemWidth",0);M(this,"itemsPerRow",0);M(this,"groupElement",null);this.mode=t,this.groupElement=document.createElement("div"),this.groupElement.classList.add("lp-layer-group")}renderGroupElement(){return this.groupElement&&!this.groupElement.parentElement&&document.body.appendChild(this.groupElement),this.groupElement}unmountGroupElement(){this.groupElement&&this.groupElement.parentElement&&this.groupElement.parentElement.removeChild(this.groupElement)}handleResize(){this.mode==="xy"&&(this.rowMaxWidth=window.innerWidth-this.paddingSize*2,this.updateLayersPosition())}setRowMaxWidth(t){return this.rowMaxWidth=t,this}setItemWidth(t){return this.itemWidth=t,this}setItemsPerRow(t){return this.itemsPerRow=t,this}transition(t,s="ease"){return this.transitionDuration=t,this.transitionTimingFunction=s,this}padding(t){return this.paddingSize=t,this}space(t){return this.spaceSize=t,this}align(t,s){return this.justifyContent=t,this.alignItems=s,this}initGroupContainerStyle(){this.groupElement&&(this.mode==="x"?(this.groupElement.style.flexDirection="row",this.groupElement.style.flexWrap="nowrap"):this.mode==="y"?(this.groupElement.style.flexDirection="column",this.groupElement.style.flexWrap="nowrap"):this.mode==="xy"&&(this.groupElement.style.flexDirection="row",this.groupElement.style.flexWrap="wrap"),this.justifyContent&&(this.groupElement.style.justifyContent=this.justifyContent),this.groupElement.style.alignItems=this.alignItems,this.groupElement.style.padding=`${this.paddingSize}px`,this.groupElement.style.gap=`${this.spaceSize}px`)}computePosition(t,s){if(s.options.follow&&s.options.follow.target)return;this.renderGroupElement(),this.initGroupContainerStyle(),ke(this).filter(r=>r.layerElement&&!r.closing);let l=s.getLayerInfo(),a=this.getOrCreatePlaceholder(s);a.style.width=`${l.width}px`,a.style.height=`${l.height}px`,this.mode==="xy"&&this.itemWidth>0&&(a.style.width=`${this.itemWidth}px`),requestAnimationFrame(()=>{const r=a.getBoundingClientRect();t.transform=`translate(${r.left}px, ${r.top}px)`,t.top="0",t.left="0",this.mode!=="x"&&(t.width=`${l.width}px`),this.mode!=="y"&&(t.height=`${l.height}px`),s.layerElement&&Object.entries(t).forEach(([u,c])=>{c!=null&&(s.layerElement.style[u]=c)})})}getOrCreatePlaceholder(t){this.groupElement||this.renderGroupElement();let s=`p-${t.id}`,n=document.getElementById(s);return n||(n=document.createElement("div"),n.id=s,n.className="lp-layer-placeholder",n.dataset.layerId=t.id,this.groupElement.appendChild(n)),n}updateLayersPosition(){this.renderGroupElement();const s=ke(this).filter(n=>n.layerElement&&!n.closing);s.forEach(n=>{n.groupResetStatus=1}),this.cleanupPlaceholders(s),s.forEach(n=>{if(n.layerElement){const l=n.getLayerInfo(),a=this.getOrCreatePlaceholder(n);a.style.width=`${l.width}px`,a.style.height=`${l.height}px`,this.mode==="xy"&&this.itemWidth>0&&(a.style.width=`${this.itemWidth}px`)}}),requestAnimationFrame(()=>{s.forEach(n=>{if(n.layerElement){const l=`p-${n.id}`,a=document.getElementById(l);if(a){const r=a.getBoundingClientRect(),u=n.layerElement.style;let c=Object.assign({},{transform:u.transform,transition:u.transition,top:u.top,left:u.left,right:u.right,bottom:u.bottom,width:u.width,height:u.height});c.transform=`translate(${r.left}px, ${r.top}px)`,c.transition=`transform ${this.transitionDuration}ms ${this.transitionTimingFunction}`,c.top="0",c.left="0";const f=n.getLayerInstance();f&&f.exposed&&f.exposed.changeContainerStyle(c)}}})})}cleanupPlaceholders(t){if(!this.groupElement)return;const s=this.groupElement.querySelectorAll(".lp-layer-placeholder"),n=new Set(t.map(l=>l.id));s.forEach(l=>{const a=l.getAttribute("data-layer-id");a&&!n.has(a)&&l.remove()})}regResizeEvent(){window.addEventListener("resize",this.handleResize.bind(this))}unregResizeEvent(){typeof window<"u"&&window.removeEventListener("resize",this.handleResize.bind(this))}getLayers(){return ke(this).filter(s=>s.layerElement&&!s.closing)}}let qo=1e3;const Ko={dialog:Qe,drawer:Ao};class Q{constructor(){M(this,"id","");M(this,"layerInstance",null);M(this,"groupResetStatus",0);M(this,"options");M(this,"layerVnode",null);M(this,"contentVnode",null);M(this,"maskLayer",null);M(this,"closing",!1);M(this,"layerZIndex",0);M(this,"maskZIndex",0);M(this,"containerEl",null);M(this,"layerElement",null);M(this,"createTime",0);this.options={component:null,useMask:!1,useOutsideClose:!1,useBodyScroll:!0,transition:"fade",drawerDirection:"right",events:{},follow:{target:null,options:{position:"bottom-center"}},lockBodyScroll:null}}get vnode(){return this.layerVnode}static src(t){const s=new Q;return s.options.component=t,s.id=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),s.createTime=Date.now(),s}model(t){return this.options.model=t,this}zIndex(t){return this.options.zIndex=t,this}on(t,s){return this.options.events[t]=s,this}off(t){return delete this.options.events[t],this}container(t,s={}){return typeof t=="string"?this.options.containerComponent=Ko[t]||null:this.options.containerComponent=t,this.options.containerProps=s,this}transitionComponent(t){return this.options.transitionComponent=t,this}getTransitionComponent(){return this.options.transitionComponent}group(t){return this.options.group=t,this}props(t){return this.options.props=t,this}containerProps(t){return this.options.containerProps=t,this}containerModel(t){return this.options.containerModel=t,this}useMask(t=!0,s={}){return this.options.useMask=t,this.options.maskOptions=Object.assign({close:!0},s),this}useOutsideClose(){return this.options.useOutsideClose=!0,this}useBodyScroll(t=!0){return this.options.useBodyScroll=t,this}lockBodyScroll(t=!0){return this.options.lockBodyScroll=t,this}transition(t){return this.options.transition=t,this}follow(t,s){if(typeof t!="string"&&!(t instanceof HTMLElement))throw console.error("Layer.follow - invalid target type, must be HTMLElement or string"),new Error("Follow target must be an HTMLElement or string");return this.options.follow={target:t,options:s},this}drawerDirection(t){return this.options.drawerDirection=t,this.options.transition=`drawer-${t}`,this}getContentComponent(){return W.resolveComponent(this.options.component)}show(t={}){var c;this.closing=!1,this.options.follow&&this.options.follow.target?this.options.position={width:t.width||"auto",height:t.height||"auto"}:this.options.position=t;let s={onLayerFullscreen:()=>{console.log("进入或退出全屏"),this.layerInstance&&this.layerInstance.exposed&&this.layerInstance.exposed.toggleFullscreen()},onLayerUseFullscreen:()=>{console.log("进入全屏"),this.layerInstance&&this.layerInstance.exposed&&this.layerInstance.exposed.useFullscreen()},onLayerExitFullscreen:()=>{console.log("退出全屏"),this.layerInstance&&this.layerInstance.exposed&&this.layerInstance.exposed.exitFullscreen()},onLayerResize:f=>{console.log("缩放",f),this.layerInstance&&this.layerInstance.exposed&&this.layerInstance.exposed.resizeLayer(f)}};this.layerZIndex=this.options.zIndex||qo++,this.maskZIndex=this.layerZIndex-1;const n=(f="layer")=>{this.closing||(this.hide(f),this.options.events.close&&this.options.events.close())},l=this.getContentComponent();let a=e.createVNode(l,{modelValue:this.options.model,...this.options.props,"onUpdate:modelValue":f=>{this.options.model&&(this.options.model=f)},onClose:()=>{n("content")},...s,...Object.keys(this.options.events).reduce((f,y)=>(y!=="close"&&(f[`on${y.charAt(0).toUpperCase()+y.slice(1)}`]=(...B)=>{this.options.events[y]&&this.options.events[y](...B)}),f),{})}),r=null;if(this.options.containerComponent){const f=((c=this.options.containerComponent)==null?void 0:c.default)||this.options.containerComponent,y={...this.options.containerProps,modelValue:this.options.containerModel,onClose:()=>{n("container")},"onUpdate:modelValue":B=>{this.options.containerModel&&(this.options.containerModel=B)}};r=e.createVNode(f,y,{default:()=>[a]})}else r=a;return this.layerVnode=e.createVNode(jo,{position:this.options.position,zIndex:this.layerZIndex,transition:this.options.transition,onClose:()=>{n("layer")},onAfterLeave:()=>{this.handleAfterLeave()},layerObj:this,follow:this.options.follow||null},{default:()=>[r]}),this.contentVnode=a,this.layerVnode.appContext=et.appContext,this.containerEl=this.getContainer(),this.options.useMask&&this.createMask(n),e.render(this.layerVnode,this.containerEl),this.layerElement=this.containerEl.firstElementChild,this.getAppendTo().appendChild(this.layerElement),Ho(this),this.options.group&&(this.options.group.renderGroupElement(),setTimeout(()=>{var f;(f=this.options.group)==null||f.updateLayersPosition()},50)),this}getAppendTo(){return this.options.group?document.body:this.options.appendTo?this.options.appendTo:document.body}handleAfterLeave(){if(this.options.group&&this.id){const s=`placeholder-${this.id}`,n=document.getElementById(s);n&&n.parentNode&&n.parentNode.removeChild(n)}this.removeElements(),Go(this);const t=this.options.group;t&&t.updateLayersPosition()}getContainer(){return document.createElement("div")}createMask(t){this.maskLayer=Q.src(Do).props({zIndex:this.maskZIndex,visible:!0}).on("click",s=>{var n;(n=this.options.maskOptions)!=null&&n.close&&t("mask"),this.emit("maskClick",s)}).zIndex(this.maskZIndex).transition("fade").useMask(!1),this.maskLayer.show({x:0,y:0,width:"100%",height:"100%"})}hide(t="layer"){if(!this.closing)if(this.closing=!0,this.maskLayer&&(this.maskLayer.hide(),this.maskLayer=null),this.layerVnode&&this.layerVnode.component&&this.layerVnode.component.exposed)try{this.layerVnode.component.exposed.close(t)}catch(s){console.error("Error closing layer:",s),this.removeElements()}else console.debug("exposed 不存在"),this.removeElements()}removeElements(){try{this.containerEl&&e.render(null,this.containerEl),this.layerElement&&this.layerElement.parentNode&&this.layerElement.parentNode.removeChild(this.layerElement),this.layerVnode=null,this.containerEl=null,this.layerElement=null}catch(t){console.error("Error removing layer elements:",t)}this.closing=!1}emit(t,...s){return this.options.events[t]&&this.options.events[t](...s),this}getLayerInfo(){return this.layerElement?{width:this.layerElement.offsetWidth,height:this.layerElement.offsetHeight,x:this.layerElement.offsetLeft,y:this.layerElement.offsetTop}:{width:0,height:0,x:0,y:0}}setLayerInstance(t){return this.layerInstance=t,this}getLayerInstance(){return this.layerInstance}close(){this.hide()}static closeAll(t=null){Yo().forEach(n=>{t&&!t(n)||n.close()})}static closeByGroup(t){ke(t).forEach(n=>{n.close()})}}async function xe(o,t){const s=await Promise.resolve().then(()=>Ea);return Q.src(s.default).props({message:o||"",duration:(t==null?void 0:t.duration)||2e3}).show({x:"center",y:"15vh",width:"auto",height:"auto"})}async function nt(o){const t=typeof o=="string"?{message:o}:o;return new Promise(async s=>{const n=await Promise.resolve().then(()=>Ba),l=e.reactive({message:t.message||"确认执行此操作？"}),a={onConfirm:()=>{r.hide(),s(!0)},onCancel:()=>{r.hide(),s(!1)}},r=Q.src(n.default).useMask().container("dialog").containerModel({title:t.title||"确认",showClose:!0}).model(l).props(a).show()})}async function lt(o){const t=typeof o=="string"?{message:o}:o;return new Promise(async s=>{const n=await Promise.resolve().then(()=>Ta),l=e.reactive({message:t.message||""}),a={onClose:()=>{r.hide(),s()}},r=Q.src(n.default).useMask().useBodyScroll(!1).container("dialog").containerModel({title:t.title||"提示",showClose:!0}).model(l).props(a).show()})}const st=Object.freeze(Object.defineProperty({__proto__:null,DialogContainer:Qe,Layer:Q,LayerGroup:Xo,alert:lt,confirm:nt,default:{install:o=>{o.config.globalProperties.$toast=xe,o.config.globalProperties.$confirm=nt,o.config.globalProperties.$alert=lt,o.config.globalProperties.$layer=Q}},toast:xe,useOutsideClick:Ze},Symbol.toStringTag,{value:"Module"})),Jo={name:"lp-layout"},Zo=e.defineComponent({...Jo,props:{type:{default:"flex"},cols:{},rows:{},gap:{},gapX:{},gapY:{},justifyContent:{},alignContent:{},justifyItems:{},alignItems:{},height:{},width:{},minHeight:{},minWidth:{},direction:{default:"column"},wrap:{type:Boolean,default:!1},template:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{}},setup(o){const t=o,s=e.computed(()=>{const l=[];return t.template?l.push("lp-grid-layout",t.template):t.type==="grid"?(l.push("lp-grid"),t.cols&&(typeof t.cols=="number"?l.push(`cols-${t.cols}`):l.push(`cols-${t.cols}`)),t.rows&&(typeof t.rows=="number"?l.push(`rows-${t.rows}`):typeof t.rows=="string"&&l.push(`rows-${t.rows}`)),t.gap!==void 0&&typeof t.gap=="number"&&l.push(`gap-${t.gap}`),t.gapX!==void 0&&typeof t.gapX=="number"&&l.push(`gap-x-${t.gapX}`),t.gapY!==void 0&&typeof t.gapY=="number"&&l.push(`gap-y-${t.gapY}`),t.justifyContent&&l.push(`justify-${t.justifyContent}`),t.alignContent&&l.push(`align-${t.alignContent}`),t.justifyItems&&l.push(`justify-items-${t.justifyItems}`),t.alignItems&&l.push(`items-${t.alignItems}`),t.height==="100vh"?l.push("h-screen"):t.height==="100%"&&l.push("h-full"),t.minHeight==="100vh"?l.push("min-h-screen"):t.minHeight==="100%"&&l.push("min-h-full"),t.width==="100%"?l.push("w-full"):t.width==="100vw"&&l.push("w-screen")):(l.push("lp-layout"),t.direction&&l.push(t.direction),t.wrap&&l.push("wrap"),t.justifyContent&&t.alignItems&&l.push(`${t.justifyContent}-${t.alignItems}`)),l}),n=e.computed(()=>{const l={};return t.gridTemplateColumns&&(l.gridTemplateColumns=t.gridTemplateColumns),t.gridTemplateRows&&(l.gridTemplateRows=t.gridTemplateRows),t.gridTemplateAreas&&(l.gridTemplateAreas=t.gridTemplateAreas),t.gap&&typeof t.gap=="string"&&(l.gap=t.gap),t.gapX&&typeof t.gapX=="string"&&(l.columnGap=t.gapX),t.gapY&&typeof t.gapY=="string"&&(l.rowGap=t.gapY),t.height&&typeof t.height=="string"&&!["100vh","100%"].includes(t.height)?l.height=t.height:typeof t.height=="number"&&(l.height=`${t.height}px`),t.width&&typeof t.width=="string"&&!["100%","100vw"].includes(t.width)?l.width=t.width:typeof t.width=="number"&&(l.width=`${t.width}px`),t.minHeight&&typeof t.minHeight=="string"&&!["100vh","100%"].includes(t.minHeight)?l.minHeight=t.minHeight:typeof t.minHeight=="number"&&(l.minHeight=`${t.minHeight}px`),t.minWidth&&typeof t.minWidth=="string"?l.minWidth=t.minWidth:typeof t.minWidth=="number"&&(l.minWidth=`${t.minWidth}px`),l});return(l,a)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(s.value),style:e.normalizeStyle(n.value)},[e.renderSlot(l.$slots,"default")],6))}}),Qo={name:"lp-grid-item"},en=e.defineComponent({...Qo,props:{colSpan:{},rowSpan:{},colStart:{},colEnd:{},rowStart:{},rowEnd:{},justifySelf:{},alignSelf:{},area:{},gridColumn:{},gridRow:{}},setup(o){const t=o,s=e.computed(()=>{const l=["lp-grid-item"];return t.colSpan&&(typeof t.colSpan=="number"?l.push(`col-span-${t.colSpan}`):l.push(`col-span-${t.colSpan}`)),t.rowSpan&&(typeof t.rowSpan=="number"?l.push(`row-span-${t.rowSpan}`):l.push(`row-span-${t.rowSpan}`)),t.colStart&&l.push(`col-start-${t.colStart}`),t.colEnd&&l.push(`col-end-${t.colEnd}`),t.rowStart&&l.push(`row-start-${t.rowStart}`),t.rowEnd&&l.push(`row-end-${t.rowEnd}`),t.justifySelf&&l.push(`justify-self-${t.justifySelf}`),t.alignSelf&&l.push(`align-self-${t.alignSelf}`),l}),n=e.computed(()=>{const l={};return t.area&&(l.gridArea=t.area),t.gridColumn&&(l.gridColumn=t.gridColumn),t.gridRow&&(l.gridRow=t.gridRow),l});return(l,a)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(s.value),style:e.normalizeStyle(n.value)},[e.renderSlot(l.$slots,"default")],6))}}),tn=Object.freeze(Object.defineProperty({__proto__:null,GridItem:en,Layout:Zo,default:{install:o=>{}}},Symbol.toStringTag,{value:"Module"})),on={class:"item"},at=Object.assign({name:"lp-list"},{props:{data:{type:[Array],default:()=>[]},listX:{type:Boolean,default:!1}},setup(o){return(t,s)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["list",{"list-x":o.listX}])},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.data,(n,l)=>(e.openBlock(),e.createElementBlock("div",on,[e.renderSlot(t.$slots,"default",{row:n})]))),256))],2))}}),nn=Object.freeze(Object.defineProperty({__proto__:null,default:{install:o=>{o.component(at.name,at)}}},Symbol.toStringTag,{value:"Module"})),ln={class:"lp-message"},rt=Object.assign({name:"lp-message"},{setup(o){return e.reactive({}),(t,s)=>(e.openBlock(),e.createElementBlock("div",ln,e.toDisplayString(t.message),1))}}),sn=Object.freeze(Object.defineProperty({__proto__:null,default:{install:o=>{o.component(rt.name,rt)}}},Symbol.toStringTag,{value:"Module"})),an={class:"lp-panel"},rn={key:0,class:"title"},cn={class:"body"},it=Object.assign({name:"lp-panel"},{props:{title:{type:String,default:""}},emits:["change"],setup(o,{emit:t}){return(s,n)=>(e.openBlock(),e.createElementBlock("div",an,[o.title?(e.openBlock(),e.createElementBlock("div",rn,e.toDisplayString(o.title),1)):e.createCommentVNode("",!0),e.createElementVNode("div",cn,[e.renderSlot(s.$slots,"default")])]))}}),dn=Object.freeze(Object.defineProperty({__proto__:null,default:{install:o=>{o.component(it.name,it)}}},Symbol.toStringTag,{value:"Module"})),pn={class:"lp-progress__inner"},un={key:0,class:"lp-progress__text"},fn={key:0,class:"lp-progress__text"},mn={name:"lp-progress"},je=e.defineComponent({...mn,props:{percentage:{default:0},type:{default:"line"},strokeWidth:{default:6},showText:{type:Boolean,default:!0},textInside:{type:Boolean,default:!1},status:{default:""},color:{},width:{default:126}},setup(o){const t=o,s=e.computed(()=>{const n={};if(n.width=t.percentage+"%",t.color)if(typeof t.color=="string")n.backgroundColor=t.color;else if(Array.isArray(t.color)){const l=t.color,a=l.map((r,u)=>{const c=u/(l.length-1)*100;return`${r} ${c}%`}).join(", ");n.background=`linear-gradient(to right, ${a})`}else typeof t.color=="function"&&(n.backgroundColor=t.color(t.percentage));return n});return e.computed(()=>t.status?t.status:t.percentage>=100?"success":""),(n,l)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["lp-progress",[`lp-progress--${n.status}`,{"lp-progress--text-inside":n.textInside}]])},[e.createElementVNode("div",{class:"lp-progress__outer",style:e.normalizeStyle({height:n.strokeWidth+"px"})},[e.createElementVNode("div",pn,[e.createElementVNode("div",{class:"lp-progress__bar",style:e.normalizeStyle(s.value)},[n.textInside?(e.openBlock(),e.createElementBlock("div",un,e.toDisplayString(n.percentage)+"% ",1)):e.createCommentVNode("",!0)],4)])],4),!n.textInside&&n.showText?(e.openBlock(),e.createElementBlock("div",fn,[e.renderSlot(n.$slots,"default",{},()=>[e.createTextVNode(e.toDisplayString(n.percentage)+"%",1)])])):e.createCommentVNode("",!0)],2))}}),hn=Object.freeze(Object.defineProperty({__proto__:null,LpProgress:je},Symbol.toStringTag,{value:"Module"})),gn={class:"lp-radio"},yn=["onClick"],_n={class:"lp-radio-input"},bn=["value","checked","onChange"],wn={class:"lp-radio-label"},kn={name:"LpRadio"},En=e.defineComponent({...kn,props:{modelValue:{type:[String,Number,Boolean,null],default:null},options:{default:()=>[]},disabled:{type:Boolean,default:!1}},emits:["update:modelValue","change"],setup(o,{emit:t}){const s=o,n=t,l=a=>{s.disabled||(n("update:modelValue",a),n("change",a))};return(a,r)=>(e.openBlock(),e.createElementBlock("div",gn,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a.options,u=>(e.openBlock(),e.createElementBlock("div",{key:u.value,class:"lp-radio-item",onClick:c=>l(u.value)},[e.createElementVNode("div",_n,[e.createElementVNode("input",{type:"radio",value:u.value,checked:a.modelValue===u.value,onChange:c=>l(u.value)},null,40,bn),r[0]||(r[0]=e.createElementVNode("span",{class:"lp-radio-mark"},null,-1))]),e.createElementVNode("span",wn,e.toDisplayString(u.title),1)],8,yn))),128))]))}}),ct=ce(En,[["__scopeId","data-v-262ccaab"]]),Cn=Object.freeze(Object.defineProperty({__proto__:null,default:{install:o=>{o.component(ct.name,ct)}}},Symbol.toStringTag,{value:"Module"})),dt=Symbol("scrollbarContextKey"),$n=({move:o,size:t,bar:s})=>{const n={};return(s==null?void 0:s.key)==="vertical"?(n.height=t,n.width="100%",n.transform=`translateY(${o||0}px)`):(n.width=t,n.height="100%",n.transform=`translateX(${o||0}px)`),n},Bn={name:"Bar"},pt=e.defineComponent({...Bn,props:{always:{type:Boolean,default:!0},width:{},height:{},ratioX:{},ratioY:{},visible:{type:Boolean,default:!1},direction:{default:"vertical"}},setup(o,{expose:t}){const s=o,n=e.inject(dt);n||To("Bar","can not inject scrollbar context");const l=e.ref(),a=e.ref(),r=e.ref({}),u=e.ref(!1);let c=!1,f=!1,y=0,B=document.onselectstart;const m=e.computed(()=>b[s.direction||(s.ratioX&&s.ratioY?"vertical":s.ratioX?"horizontal":"vertical")]);e.computed(()=>({[m.value.size]:s[m.value.size],[m.value.axis]:r.value[m.value.axis]}));const E=e.computed(()=>$n({size:s[m.value.size],move:r.value[m.value.axis],bar:m.value}));e.computed(()=>l.value[m.value.offset]**2/n.wrapElement[m.value.scrollSize]/s[m.value.ratio]);const v=C=>{var g;if(C.stopPropagation(),C.ctrlKey||[1,2].includes(C.button))return;(g=window.getSelection())==null||g.removeAllRanges();const S=C.currentTarget;if(!S)return;const $=S.getBoundingClientRect();y=C[m.value.client]-$[m.value.direction],V(C)},O=C=>{if(!a.value||!l.value||!n.wrapElement)return;const S=l.value.getBoundingClientRect(),$=C[m.value.client]-S[m.value.direction],g=a.value[m.value.offset]/2,L=$-g,D=l.value[m.value.offset]-a.value[m.value.offset],G=Math.max(0,Math.min(D,L)),H=D>0?G/D*100:0;r.value[m.value.axis]=G;const Y=n.wrapElement[m.value.scrollSize]-n.wrapElement[m.value.offset];n.wrapElement[m.value.scroll]=H*Y/100},V=C=>{C.stopImmediatePropagation(),c=!0,document.addEventListener("mousemove",w),document.addEventListener("mouseup",_),B=document.onselectstart,document.onselectstart=()=>!1},w=C=>{if(!c||!l.value||!a.value||!n.wrapElement)return;const S=l.value.getBoundingClientRect(),g=C[m.value.client]-S[m.value.direction]-y,L=l.value[m.value.offset]-a.value[m.value.offset],D=Math.max(0,Math.min(L,g)),G=L>0?D/L*100:0;r.value[m.value.axis]=D;const H=n.wrapElement[m.value.scrollSize]-n.wrapElement[m.value.offset];n.wrapElement[m.value.scroll]=G*H/100},_=()=>{c=!1,y=0,document.removeEventListener("mousemove",w),document.removeEventListener("mouseup",_),i(),f&&(u.value=!1)},h=()=>{f=!1,u.value=!!s[m.value.size]},p=()=>{f=!0,u.value=c},i=()=>{document.onselectstart!==B&&(document.onselectstart=B)},d=C=>{if(!c&&C&&l.value&&a.value){const S=C[m.value.scroll],$=C[m.value.scrollSize]-C[m.value.offset],g=$>0?S/$*100:0,L=l.value[m.value.offset]-a.value[m.value.offset];r.value[m.value.axis]=g*L/100}};e.onMounted(()=>{l.value&&(l.value.addEventListener("mousemove",h),l.value.addEventListener("mouseleave",p))}),e.onBeforeUnmount(()=>{i(),document.removeEventListener("mouseup",_),l.value&&(l.value.removeEventListener("mousemove",h),l.value.removeEventListener("mouseleave",p))});const b={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top",ratio:"ratioY"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left",ratio:"ratioX"}};return t({handleScroll:d}),(C,S)=>(e.openBlock(),e.createBlock(e.Transition,{name:"lp-scrollbar-fade"},{default:e.withCtx(()=>[e.withDirectives(e.createElementVNode("div",{ref_key:"instance",ref:l,class:e.normalizeClass(["lp-scrollbar__bar","is-"+m.value.key,{"is-visible":C.always||u.value||s.visible}]),onMousedown:O},[e.createElementVNode("div",{ref_key:"thumb",ref:a,class:"lp-scrollbar__thumb",style:e.normalizeStyle(E.value),onMousedown:v},null,36)],34),[[e.vShow,C.always||u.value||s.visible]])]),_:1}))}}),Sn={name:"LpScrollbar"},Oe=e.defineComponent({...Sn,props:{height:{default:""},maxHeight:{default:""},native:{type:Boolean,default:!1},wrapStyle:{type:[Boolean,null,String,Object,Array],default:""},wrapClass:{default:""},viewClass:{default:""},viewStyle:{type:[Boolean,null,String,Object,Array],default:""},noresize:{type:Boolean,default:!1},tag:{default:"div"},always:{type:Boolean,default:!1},minSize:{default:20}},emits:["scroll"],setup(o,{expose:t,emit:s}){const n="LpScrollbar",l=o,a=s;let r;const u=e.ref(),c=e.ref(),f=e.ref(),y=e.ref(),B=e.ref(),m=e.ref("0"),E=e.ref("0");e.reactive({});const v=e.ref(1),O=e.ref(1),V=e.ref(!1),w=e.computed(()=>{const $={};return l.height&&($.height=Ke(l.height)),l.maxHeight&&($.maxHeight=Ke(l.maxHeight)),[l.wrapStyle,$]}),_=e.computed(()=>[l.wrapClass,"lp-scrollbar__wrap",{"lp-scrollbar__wrap--hidden-default":!l.native}]),h=e.computed(()=>["lp-scrollbar__view",l.viewClass]),p=e.computed(()=>l.viewStyle),i=()=>{if(c.value){const $=c.value.scrollTop,g=c.value.scrollLeft;y.value&&y.value.handleScroll(c.value),B.value&&B.value.handleScroll(c.value),a("scroll",{scrollTop:$,scrollLeft:g})}};function d($,g){Vo($)?c.value.scrollTo($):be($)&&be(g)&&c.value.scrollTo($,g)}const b=$=>{if(!be($)){Je(n,"value must be a number");return}c.value.scrollTop=$},C=$=>{if(!be($)){Je(n,"value must be a number");return}c.value.scrollLeft=$},S=()=>{if(!c.value)return;const $=c.value.clientHeight*100/c.value.scrollHeight,g=c.value.clientWidth*100/c.value.scrollWidth;E.value=$<100?`${$}%`:"",m.value=g<100?`${g}%`:"",v.value=c.value.scrollHeight/c.value.clientHeight,O.value=c.value.scrollWidth/c.value.clientWidth,V.value=!!(E.value||m.value)};return e.onMounted(()=>{l.native||e.nextTick(()=>{S();const $=new ResizeObserver(()=>{S()});c.value&&$.observe(c.value);const g=new MutationObserver(()=>{S()});c.value&&g.observe(c.value,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["style","class"]}),r=()=>{$.disconnect(),g.disconnect()}}),u.value&&(u.value.addEventListener("mouseenter",()=>{V.value=!!(E.value||m.value)}),u.value.addEventListener("mouseleave",()=>{l.always||(V.value=!1)}))}),e.onBeforeUnmount(()=>{r==null||r()}),e.provide(dt,e.reactive({scrollbarElement:u,wrapElement:c})),t({wrapRef:c,update:S,scrollTo:d,setScrollTop:b,setScrollLeft:C,handleScroll:i}),($,g)=>(e.openBlock(),e.createElementBlock("div",{ref_key:"scrollbarRef",ref:u,class:e.normalizeClass(["lp-scrollbar",{"lp-scrollbar--hidden":!$.always&&!V.value}])},[e.createElementVNode("div",{ref_key:"wrapRef",ref:c,class:e.normalizeClass(["lp-scrollbar__wrap",_.value]),style:e.normalizeStyle(w.value),onScroll:i},[(e.openBlock(),e.createBlock(e.resolveDynamicComponent($.tag),{ref_key:"resizeRef",ref:f,class:e.normalizeClass(["lp-scrollbar__view",h.value]),style:e.normalizeStyle(p.value)},{default:e.withCtx(()=>[e.renderSlot($.$slots,"default")]),_:3},8,["class","style"]))],38),$.native?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[E.value?(e.openBlock(),e.createBlock(pt,{key:0,ref_key:"verticalBarRef",ref:y,height:E.value,width:"",always:$.always,"ratio-x":1,"ratio-y":v.value,visible:V.value,direction:"vertical"},null,8,["height","always","ratio-y","visible"])):e.createCommentVNode("",!0),m.value?(e.openBlock(),e.createBlock(pt,{key:1,ref_key:"horizontalBarRef",ref:B,height:"",width:m.value,always:$.always,"ratio-x":O.value,"ratio-y":1,visible:V.value,direction:"horizontal"},null,8,["width","always","ratio-x","visible"])):e.createCommentVNode("",!0)],64))],2))}}),vn=Object.freeze(Object.defineProperty({__proto__:null,default:{install:o=>{o.component(Oe.name,Oe)}}},Symbol.toStringTag,{value:"Module"})),Tn={class:"lp-select-items"},Vn=["onClick"],xn={class:"label"},jn={key:0,class:"lp-select__selected-icon-box"},On={name:"LpSelectItems"},Ln=e.defineComponent({...On,props:{list:{default:()=>[]},limit:{default:1}},emits:["select","close"],setup(o,{emit:t}){const s=o,n=t,l=a=>{n("select",a),s.limit==1&&n("close")};return e.reactive({}),e.onMounted(()=>{console.log("lp-select-items list",s.list,e.isRef(s.list))}),(a,r)=>(e.openBlock(),e.createElementBlock("div",Tn,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.isRef(s.list)?s.list.value:s.list,u=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["lp-select-items__item",{active:u.__selected}]),key:u.value,onClick:c=>l(u)},[e.createElementVNode("div",xn,e.toDisplayString(u.label),1),u.__selected?(e.openBlock(),e.createElementBlock("div",jn,[e.createVNode(e.unref(W.LpIcon),{class:"lp-select__selected-icon",is:"selected",size:"14"})])):e.createCommentVNode("",!0)],10,Vn))),128))]))}}),Nn={class:"lp-select__selected"},zn={key:0,class:"lp-select__placeholder"},Mn={class:"lp-select__selected-item input-item"},Pn=e.defineComponent({__name:"lp-select-selected",props:{selecteds:{},options:{},placeholder:{},labelField:{default:"label"},valueField:{default:"value"},limit:{default:1},itemComponent:{}},emits:["removeItem","search"],setup(o,{emit:t}){const s=e.ref(null),n=o;e.reactive({});const l=e.ref(""),a=t;function r(f){console.log("handleRemoveItem",f),a("removeItem",f)}function u(){n.itemComponent?s.value=e.markRaw(W.loadComponent(n.itemComponent)):n.limit===1?s.value="div":s.value=e.markRaw(W.loadComponent("LooplanUiNeeds@SelectedTag"))}function c(){a("search",l.value)}return e.onMounted(()=>{u()}),(f,y)=>(e.openBlock(),e.createElementBlock("div",Nn,[!f.selecteds.length&&!l.value?(e.openBlock(),e.createElementBlock("div",zn,e.toDisplayString(f.placeholder),1)):e.createCommentVNode("",!0),f.selecteds.length?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:1},e.renderList(f.selecteds,(B,m)=>(e.openBlock(),e.createElementBlock("div",{key:m,class:"lp-select__selected-item"},[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(s.value),{value:B,labelField:f.labelField,valueField:f.valueField,onRemoveItem:r},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(B[n.labelField||"label"]),1)]),_:2},1064,["value","labelField","valueField"]))]))),128)):e.createCommentVNode("",!0),e.createElementVNode("div",Mn,[e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":y[0]||(y[0]=B=>l.value=B),onInput:c,class:"lp-select__serch",type:"text"},null,544),[[e.vModelText,l.value]])])]))}});var Z=(o=>(o.STRING="string",o.ARRAY="array",o.OBJECT="object",o.AUTO="auto",o))(Z||{});function In(o,t={}){const{valueField:s="value",labelField:n="label",limit:l=1,valueType:a=Z.AUTO}=t,r=e.ref([]),u=e.ref([]);let c=[];const f=e.computed(()=>r.value.length>0),y=_=>{c=[],u.value=_.map(h=>{const p={label:h[n],value:h[s],data:h,__selected:h[s]===o.value};return c.push(p),p}),v()},B=()=>{c.forEach(_=>{const h=r.value.some(p=>p[s]===_[s]);_.__selected=h}),u.value=[...c]},m=_=>{const h=r.value.some(p=>p[s]===_[s]);if(console.log("isSelected",h,l),!h&&l>1&&r.value.length>=l){_.__selected=!1,xe("选择数量已达上限:"+l,{duration:2e3});return}if(_.__selected=!h,!h)l===1?r.value=[_]:r.value.push(_);else{let p=r.value.findIndex(i=>i[s]===_[s]);p!==-1&&r.value.splice(p,1)}l==1&&B(),E()};function E(){console.log("renderModelValue",a,r),l===1?a===Z.OBJECT?o.value=r.value.length>0?r.value[0].data:{}:o.value=r.value.length>0?r.value[0].value:"":a===Z.ARRAY||a===Z.AUTO?o.value=r.value.map(_=>_.value).join(","):a===Z.OBJECT?o.value=r.value.map(_=>_.data):o.value=r.value.map(_=>_.value)}function v(){r.value=[];const _=h=>c.find(p=>p[s]===h);if(l===1)if(a===Z.OBJECT){const h=o.value;let p;h&&typeof h=="object"?p=h[s]:p=h;const i=_(p);r.value=i?[i]:[]}else{const h=_(o.value);r.value=h?[h]:[]}else{let h=[];a===Z.OBJECT?h=(Array.isArray(o.value)?o.value:[]).map(i=>i&&typeof i=="object"?i[s]:i).filter(i=>i!=null):a===Z.STRING||typeof o.value=="string"?h=(typeof o.value=="string"?o.value:"").split(",").map(i=>i.trim()).filter(Boolean):Array.isArray(o.value)?h=o.value:typeof o.value=="string"?h=o.value.split(",").map(p=>p.trim()).filter(Boolean):h=[],r.value=h.map(p=>_(p)).filter(p=>!!p)}B()}e.watch(()=>o.value,()=>{v()});function O(){r.value=[],E()}function V(_){m(_)}function w(_){console.log("onSearch",_),u.value=c.filter(h=>(console.log("onSearch item",h),h.label.indexOf(_)!==-1)),console.log("onSearch nums",u.value.length)}return{selecteds:r,optionsRender:u,clearableVisible:f,handleOptions:y,onSelect:m,onRemoveItem:V,onClear:O,onSearch:w}}const Rn={class:"lp-select__main"},An={class:"lp-select__right"},Dn={name:"LpSelect"},ut=e.defineComponent({...Dn,props:e.mergeModels({options:{default:()=>[]},limit:{default:1},valueType:{default:Z.AUTO},placeholder:{default:"请选择"},selectedItemComponent:{}},{modelValue:{default:""},modelModifiers:{}}),emits:["update:modelValue"],setup(o){const t=e.ref(),s=o,n=e.useModel(o,"modelValue"),l=e.reactive({isActive:!1}),{selecteds:a,optionsRender:r,clearableVisible:u,handleOptions:c,onSelect:f,onRemoveItem:y,onClear:B,onSearch:m}=In(n,{valueField:"value",labelField:"label",limit:s.limit,valueType:s.valueType});let E=null;function v(V){console.log("click"),l.isActive=!l.isActive;const w=V.target,_="bottom-center";if(console.log("state.isActive",l.isActive),console.log("pickerModal",E),console.log("target",w),!l.isActive){E&&E.close();return}E=Q.src(Ln).props({list:r,limit:s.limit}).follow(t.value,{position:_,arrow:!0,arrowSize:10}).on("close",()=>{l.isActive=!1}).on("select",h=>{console.log("select",h),f(h)}).useOutsideClose().useBodyScroll(!1).show({width:"200",height:"200"})}function O(){E&&E.close(),B()}return e.watch(()=>s.options,V=>{c(V)},{immediate:!0,deep:!0}),e.onMounted(()=>{console.log(s.valueType)}),e.onUnmounted(()=>{E&&E.close()}),(V,w)=>(e.openBlock(),e.createElementBlock("div",{ref_key:"selectRef",ref:t,class:"lp-select",onClick:w[0]||(w[0]=_=>v(_))},[e.createElementVNode("div",null,e.toDisplayString(e.unref(a)),1),e.createElementVNode("div",Rn,[e.createVNode(Pn,{selecteds:e.unref(a),options:e.unref(r),limit:s.limit,placeholder:s.placeholder,itemComponent:s.selectedItemComponent,onRemoveItem:e.unref(y),onSearch:e.unref(m)},null,8,["selecteds","options","limit","placeholder","itemComponent","onRemoveItem","onSearch"]),e.createElementVNode("div",An,[e.unref(u)?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(e.unref(W.LpIcon),{key:0,is:"down",size:"14",color:"#ccc",class:e.normalizeClass(["lp-select__icon",{active:l.isActive}])},null,8,["class"])),e.unref(u)?(e.openBlock(),e.createBlock(e.unref(W.LpIcon),{key:1,onClick:e.withModifiers(O,["stop"]),is:"close",size:"14",color:"#ccc",class:"lp-select__close-icon"})):e.createCommentVNode("",!0)])])],512))}}),Fn={class:"lp-layout"},Wn={__name:"lp-select-selected-one",setup(o){return e.reactive({}),(t,s)=>(e.openBlock(),e.createElementBlock("div",Fn," 单选 "))}},Un={class:"lp-select-selected-tag"},ft=e.defineComponent({__name:"lp-select-selected-tag",props:{value:{},labelField:{default:"label"},valueField:{default:"value"}},emits:["removeItem"],setup(o,{emit:t}){const s=t,n=o;e.reactive({});function l(){s("removeItem",n.value)}return(a,r)=>(e.openBlock(),e.createElementBlock("div",Un,[e.createVNode(e.unref(pe),{closable:"",onClose:l},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(a.value?a.value[n.labelField]:""),1)]),_:1})]))}}),Hn=Object.freeze(Object.defineProperty({__proto__:null,SelectSelectedOne:Wn,SelectSelectedTag:ft,default:{install:o=>{o.component(ut.name,ut)}}},Symbol.toStringTag,{value:"Module"})),Gn=["checked","disabled"],Yn={class:"lp-switch__core"},Xn={key:0,class:"lp-switch__loading"},qn={key:1,class:"lp-switch__inner"},Kn={key:0},Jn={key:1},Zn={class:"lp-switch__action"},Qn={key:0,class:"lp-switch__label lp-switch__label--left"},el={key:1,class:"lp-switch__label lp-switch__label--right"},tl={name:"LpSwitch"},mt=e.defineComponent({...tl,props:{modelValue:{type:[Boolean,String,Number]},disabled:{type:Boolean},loading:{type:Boolean},size:{default:"default"},width:{},inlinePrompt:{type:Boolean},activeIcon:{},inactiveIcon:{},activeText:{},inactiveText:{},activeValue:{type:[Boolean,String,Number],default:!0},inactiveValue:{type:[Boolean,String,Number],default:!1},activeColor:{},inactiveColor:{},borderColor:{},name:{},validateEvent:{type:Boolean,default:!0},beforeChange:{}},emits:["update:modelValue","change","focus","blur"],setup(o,{expose:t,emit:s}){const n=o,l=s,a=e.inject("lpFormItem",null),r=e.ref(),u=e.ref(!1),c=e.computed(()=>n.size||(a==null?void 0:a.size)||"default"),f=e.computed(()=>n.disabled||u.value),y=e.computed(()=>n.modelValue===n.activeValue);e.computed(()=>{const w={};return n.width&&(w.width=typeof n.width=="number"?`${n.width}px`:n.width),n.activeColor&&y.value?(w.backgroundColor=n.activeColor,w.borderColor=n.activeColor):n.inactiveColor&&!y.value&&(w.backgroundColor=n.inactiveColor,w.borderColor=n.inactiveColor),w});const B=()=>{var w;(w=r.value)==null||w.focus()},m=()=>{var w;(w=r.value)==null||w.blur()},E=async()=>{var _;if(f.value)return;if(n.beforeChange){u.value=!0;try{if(!await n.beforeChange()){u.value=!1;return}}catch{u.value=!1;return}u.value=!1}const w=y.value?n.inactiveValue:n.activeValue;l("update:modelValue",w),l("change",w),n.validateEvent&&((_=a==null?void 0:a.validate)==null||_.call(a,"change")),e.nextTick(()=>{r.value.checked=y.value})},v=()=>{},O=w=>{l("focus",w)},V=w=>{var _;l("blur",w),n.validateEvent&&((_=a==null?void 0:a.validate)==null||_.call(a,"blur"))};return t({focus:B,blur:m,checked:y}),(w,_)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["lp-switch",{"lp-switch--checked":y.value,"lp-switch--disabled":f.value,"lp-switch--loading":w.loading,[`lp-switch--${c.value}`]:c.value}]),onClick:E},[e.createElementVNode("input",{ref_key:"inputRef",ref:r,class:"lp-switch__input",type:"checkbox",checked:y.value,disabled:f.value,onChange:v,onFocus:O,onBlur:V},null,40,Gn),e.createElementVNode("span",Yn,[w.loading?(e.openBlock(),e.createElementBlock("div",Xn,_[0]||(_[0]=[e.createElementVNode("i",{class:"lp-switch__loading-icon"},null,-1)]))):e.createCommentVNode("",!0),w.inlinePrompt&&(w.activeText||w.inactiveText)?(e.openBlock(),e.createElementBlock("span",qn,[y.value?(e.openBlock(),e.createElementBlock("span",Kn,e.toDisplayString(w.activeText),1)):(e.openBlock(),e.createElementBlock("span",Jn,e.toDisplayString(w.inactiveText),1))])):e.createCommentVNode("",!0),e.createElementVNode("div",Zn,[w.activeIcon&&y.value?(e.openBlock(),e.createElementBlock("i",{key:0,class:e.normalizeClass([w.activeIcon,"lp-switch__action-icon"])},null,2)):w.inactiveIcon&&!y.value?(e.openBlock(),e.createElementBlock("i",{key:1,class:e.normalizeClass([w.inactiveIcon,"lp-switch__action-icon"])},null,2)):e.createCommentVNode("",!0)])]),!w.inlinePrompt&&w.activeText&&y.value?(e.openBlock(),e.createElementBlock("span",Qn,e.toDisplayString(w.activeText),1)):e.createCommentVNode("",!0),!w.inlinePrompt&&w.inactiveText&&!y.value?(e.openBlock(),e.createElementBlock("span",el,e.toDisplayString(w.inactiveText),1)):e.createCommentVNode("",!0)],2))}}),ol=Object.freeze(Object.defineProperty({__proto__:null,default:{install:o=>{o.component(mt.name,mt)}}},Symbol.toStringTag,{value:"Module"})),nl={class:"lp-table"},ll={class:"lp-table__thead"},sl={class:"lp-table__tr"},al={class:"lp-table__tbody"},rl={name:"lp-table"},il=e.defineComponent({...rl,props:{columns:{},data:{}},setup(o){const t=e.useSlots(),s=e.useAttrs(),n=o,l=e.computed(()=>{if(!n.columns||n.columns.length===0)return"auto";let a=0,r=!1;return n.columns.forEach(u=>{if(u.width){const c=parseInt(u.width.replace(/px|%|em|rem/g,""));a+=c}else r=!0}),r&&(a+=150*n.columns.filter(u=>!u.width).length),`${a}px`});return e.reactive({}),e.onMounted(()=>{console.log("slots",t),console.log("attrs",s),console.log("computed table width:",l.value)}),(a,r)=>(e.openBlock(),e.createElementBlock("div",nl,[e.createVNode(Oe,{class:"lp-table__scrollbar"},{default:e.withCtx(()=>[e.createElementVNode("table",{class:"lp-table__table",style:e.normalizeStyle({width:l.value})},[e.createElementVNode("thead",ll,[e.createElementVNode("tr",sl,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.columns,u=>(e.openBlock(),e.createElementBlock("th",{key:u.name,class:e.normalizeClass(["lp-table__th",u.align&&`lp-table__th--${u.align}`,u.fixed&&`lp-table__th--fixed-${u.fixed}`]),style:e.normalizeStyle({width:u.width,minWidth:u.width})},e.toDisplayString(u.title),7))),128))])]),e.createElementVNode("tbody",al,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.data,(u,c)=>(e.openBlock(),e.createElementBlock("tr",{key:c,class:"lp-table__tr"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.columns,f=>(e.openBlock(),e.createElementBlock("td",{key:f.name,class:e.normalizeClass(["lp-table__td",f.align&&`lp-table__td--${f.align}`,f.fixed&&`lp-table__td--fixed-${f.fixed}`]),style:e.normalizeStyle({width:f.width,minWidth:f.width})},[e.unref(t)[`column.${f.name}`]?e.renderSlot(a.$slots,`column.${f.name}`,{key:0,item:u,column:f,index:c},void 0,!0):e.unref(t)[`field.${f.name}`]?e.renderSlot(a.$slots,`field.${f.name}`,{key:1,item:u,column:f,index:c},void 0,!0):(e.openBlock(),e.createElementBlock(e.Fragment,{key:2},[e.createTextVNode(e.toDisplayString(u[f.name]),1)],64))],6))),128))]))),128))])],4)]),_:3})]))}}),Le=ce(il,[["__scopeId","data-v-8783e39f"]]),cl={title:{type:String,default:""},name:{type:String,default:""},width:{type:String,default:""},align:{type:String,default:"left"},fixed:{type:String,default:""},fixedRight:{type:Boolean,default:!1},sortable:{type:Boolean,default:!1}},Ne=e.defineComponent({name:"LpTableColumn",props:cl,setup(o){},render(){}}),dl=Object.freeze(Object.defineProperty({__proto__:null,LpTable:Le,LpTableColumn:Ne,default:{install:o=>{o.component(Le.name,Le),o.component(Ne.name,Ne)}}},Symbol.toStringTag,{value:"Module"})),pl=["onClick"],ul={class:"text"},fl={name:"lp-tabs"},ht=e.defineComponent({...fl,props:e.mergeModels({keys:{default:()=>({value:"value",title:"title"})},type:{default:"default"},data:{default:()=>[]},full:{type:Boolean,default:!1},column:{type:Boolean,default:!1},modelType:{default:"field"},modelField:{default:void 0}},{modelValue:{},modelModifiers:{}}),emits:e.mergeModels(["change"],["update:modelValue"]),setup(o,{emit:t}){const s=e.useModel(o,"modelValue"),n=t,l=o;function a(c,f){return c[l.keys.value]??f}function r(c,f){return l.modelType==="index"?s.value===f:l.modelType==="field"&&l.modelField?s.value===c[l.modelField]:s.value===c[l.keys.value]}function u(c,f){let y;l.modelType==="index"?y=f:l.modelType==="field"&&l.modelField?y=c[l.modelField]:y=c[l.keys.value],s.value=y,n("change",{value:y,item:c,index:f})}return(c,f)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["lp-tabs",[{column:c.column,full:c.full},c.type?`type-${c.type}`:""]])},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(c.data,(y,B)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["item",{active:r(y,B)}]),key:a(y,B),onClick:m=>u(y,B)},[e.createElementVNode("span",ul,e.toDisplayString(y[c.keys.title]),1)],10,pl))),128))],2))}}),ml=Object.freeze(Object.defineProperty({__proto__:null,default:{install:o=>{o.component(ht.name,ht)}}},Symbol.toStringTag,{value:"Module"})),hl={name:"LpTag"},gl=e.defineComponent({...hl,props:{type:{type:String,default:"",validator:o=>["","primary","success","warning","danger","info"].includes(o)},size:{type:String,default:"",validator:o=>["","large","small"].includes(o)},plain:{type:Boolean,default:!1},round:{type:Boolean,default:!1},closable:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},emits:["click","close"],setup(o,{emit:t}){const s=o,n=t,l=r=>{s.disabled||n("click",r)},a=r=>{s.disabled||n("close",r)};return(r,u)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["lp-tag",[o.type?`type-${o.type}`:"",o.size?`size-${o.size}`:"",{plain:o.plain,round:o.round,disabled:o.disabled}]]),onClick:l},[e.renderSlot(r.$slots,"default",{},void 0,!0),o.closable?(e.openBlock(),e.createElementBlock("div",{key:0,class:"close-box",onClick:e.withModifiers(a,["stop"])},[e.createVNode(e.unref(W.LpIcon),{is:"close",size:"12"})])):e.createCommentVNode("",!0)],2))}}),pe=ce(gl,[["__scopeId","data-v-36e54ad7"]]),yl=Object.freeze(Object.defineProperty({__proto__:null,LpTag:pe,default:{install:o=>{o.component(pe.name,pe)}}},Symbol.toStringTag,{value:"Module"}));var ue=(o=>(o.TEXT="text",o.IMG="img",o.FILE="file",o))(ue||{}),K=(o=>(o.STRING="string",o.ARRAY="array",o.OBJECT_ARRAY="objectArray",o.AUTO="",o))(K||{}),X=(o=>(o.PENDING="pending",o.UPLOADING="uploading",o.SUCCESS="success",o.ERROR="error",o))(X||{});class ze{constructor(t,s,n){M(this,"item");M(this,"file");M(this,"action");M(this,"abortController");M(this,"callbacks",{});M(this,"frontendOption");M(this,"progress",e.ref({loaded:0,total:0,percentage:0}));M(this,"progressStatus","");this.item=t,this.file=s,this.action=n}static create(t,s,n){return new ze(t,s,n)}async getFrontendUploadOption(){if(!this.action||this.action.type!=="option")return null;try{const t=await ve.post(this.action.url,{},{headers:{"Content-Type":"application/json",...this.action.headers}});return t.data.data||t.data}catch(t){throw console.error("获取前端直传配置失败:",t),t}}processFileName(t,s){const n={};if(s.includes("etag")&&(n.etag=Date.now().toString()+Math.random().toString(36).substr(2,9)),s.includes("ext")){const l=t.lastIndexOf(".");n.ext=l>-1?t.substring(l):""}return n}replacePlaceholders(t,s){let n=t;return Object.entries(s).forEach(([l,a])=>{n=n.replace(new RegExp(`\\$\\(${l}\\)`,"g"),a)}),n}async frontendDirectUpload(){var a,r,u,c,f,y;if(!this.file||!this.frontendOption)throw new Error("文件或前端直传配置不存在");const t=new FormData,s=this.processFileName(this.file.name,this.frontendOption.handles),n=this.replacePlaceholders(this.frontendOption.data.key||"",s);Object.entries(this.frontendOption.data).forEach(([B,m])=>{typeof m=="string"?t.append(B,this.replacePlaceholders(m,s)):t.append(B,String(m))});const l=this.frontendOption.fieldName||"file";t.append(l,this.file),this.abortController=new AbortController;try{const B=await ve.post(this.frontendOption.url,t,{headers:{"Content-Type":"multipart/form-data"},signal:this.abortController.signal,onUploadProgress:E=>{var v,O;if(E.total){const V={loaded:E.loaded,total:E.total,percentage:Math.round(E.loaded/E.total*100)};(O=(v=this.callbacks).onProgress)==null||O.call(v,V),this.progress.value=V}}}),m={data:{fullUrl:`${this.frontendOption.domain}/${n}`,key:n,url:`${this.frontendOption.domain}/${n}`}};return(r=(a=this.callbacks).onSuccess)==null||r.call(a,m),m}catch(B){if(B.name==="CanceledError"){const E=new Error("上传已取消");throw(c=(u=this.callbacks).onError)==null||c.call(u,E),E}const m=new Error(`前端直传失败: ${B.message}`);throw(y=(f=this.callbacks).onError)==null||y.call(f,m),m}}setCallbacks(t){return this.callbacks={...this.callbacks,...t},this}async upload(){if(!this.file||!this.action)throw new Error("文件或上传配置不存在");if(this.action.type==="option")try{if(this.frontendOption=await this.getFrontendUploadOption(),console.log("前端直传配置:",this.frontendOption),this.frontendOption)return await this.frontendDirectUpload()}catch(t){console.error("前端直传配置获取失败，回退到普通上传:",t)}return this.normalUpload()}async normalUpload(){var s,n,l,a,r,u;if(!this.file||!this.action)throw new Error("文件或上传地址不存在");const t=new FormData;t.append("file",this.file),this.abortController=new AbortController;try{const c=await ve.post(this.action.url,t,{headers:{"Content-Type":"multipart/form-data",...this.action.headers},signal:this.abortController.signal,onUploadProgress:f=>{var y,B;if(f.total){const m={loaded:f.loaded,total:f.total,percentage:Math.round(f.loaded/f.total*100)};(B=(y=this.callbacks).onProgress)==null||B.call(y,m),this.progress.value=m}}});return(n=(s=this.callbacks).onSuccess)==null||n.call(s,c.data),c.data}catch(c){if(c.name==="CanceledError"){const y=new Error("上传已取消");throw(a=(l=this.callbacks).onError)==null||a.call(l,y),y}const f=new Error(`上传失败: ${c.message}`);throw(u=(r=this.callbacks).onError)==null||u.call(r,f),f}}abort(){this.abortController&&(this.abortController.abort(),this.abortController=void 0)}getStatus(){return this.abortController?this.abortController.signal.aborted?"aborted":this.progress.value.percentage===100?"success":this.progress.value.percentage>0?"uploading":"pending":"pending"}}function _l(o,t){return t.split(".").reduce((s,n)=>s&&s[n]!==void 0?s[n]:null,o)}function Me(o){if(!o)return"";try{const s=o.split("?")[0].split("#")[0].split("/"),n=s[s.length-1];return!n||n.startsWith(".")?"未知文件":decodeURIComponent(n)}catch(t){return console.warn("提取文件名失败:",t),"未知文件"}}function bl(o,t){const s=e.ref([]),n=e.ref(new Map),l=new Map;let a=0,r=null;const u=()=>t.type===ue.IMG?"image/*":t.type===ue.FILE?"*":t.type===ue.TEXT?"text/*":"",c=()=>{r=o.value;const h=document.createElement("input");h.type="file",h.accept=t.value.accept||u(),h.multiple=t.value.limit!==1,h.addEventListener("change",async p=>{const d=p.target.files;if(d&&d.length>0){if(t.value.limit===1&&s.value.length>0){const b=s.value[0];b.uploader,b._id&&l.delete(b._id),s.value=[]}for(let b=0;b<d.length;b++){const C=d[b],S=`file_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,$={_id:S,url:"",name:C.name,size:C.size,type:C.type,uploader:null,status:X.PENDING};if(C.type.startsWith("image/")){const g=new FileReader;g.readAsDataURL(C),g.onload=()=>{$.url=g.result}}s.value.push($),l.set(S,C),t.value.autoUpload&&t.value.action&&await f($,C)}}}),h.click()},f=async(h,p)=>{if(!t.value.action){console.warn("未配置上传地址");return}const i=ze.create(h,p,t.value.action);h.uploader=i,h.status=X.UPLOADING,i.setCallbacks({onProgress:d=>{console.log("上传进度:",d)},onSuccess:d=>{const b=t.value.responseField||"data.fullUrl",C=_l(d,b);C&&(h.url=C,h.status=X.SUCCESS,m()),n.value.delete(h),console.log("上传成功:",d)},onError:d=>{h.status=X.ERROR,n.value.delete(h),console.error("上传失败:",d)}});try{await i.upload()}catch(d){console.error("上传异常:",d)}},y=h=>{if(h.uploader&&(h.uploader.abort(),h.uploader=null,n.value.delete(h)),h._id&&l.delete(h._id),t.value.limit===1)o.value=r,B(r);else{const p=s.value.indexOf(h);p>-1&&(s.value.splice(p,1),m())}},B=h=>{l.clear();let p=t.value.valueType;if(t.value.valueType==K.AUTO&&(t.value.limit==1?p=K.STRING:p=K.ARRAY),console.log("flushModelValue",p,h),!h){s.value=[];return}if(p===K.ARRAY)s.value=h.map(i=>({_id:`file_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,url:i,name:Me(i),uploader:null,status:X.SUCCESS}));else if(p===K.STRING){let i=t.value.limit===1?[h]:h.split(",");s.value=i.map(d=>({_id:`file_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,url:d,name:Me(d),uploader:null,status:X.SUCCESS}))}else p===K.OBJECT_ARRAY?s.value=h.map(i=>({_id:i._id||`file_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,url:i.url,name:i.name||Me(i.url),size:i.size||0,type:i.type||"",uploader:null,status:X.SUCCESS})):s.value=[]},m=()=>{a++;let h=t.value.valueType;t.value.valueType==K.AUTO&&(t.value.limit==1?h=K.STRING:h=K.ARRAY);let p;const i=s.value.filter(d=>d.url&&!d.url.startsWith("data:"));h===K.ARRAY?p=i.map(d=>d.url):h===K.STRING?t.value.limit===1?p=i.length>0?i[0].url:"":p=i.map(d=>d.url).join(","):h===K.OBJECT_ARRAY?p=i.map(d=>({url:d.url,name:d.name,size:d.size,type:d.type})):p="",o.value=p,a--},E=()=>{B(o.value)},v=h=>{const p=s.value[h];p.uploader&&y(p),l.delete(p._id),s.value.splice(h,1),m()};return e.watch(s,()=>{a===0&&m()},{deep:!0}),e.watch(()=>o.value,(h,p)=>{if(a===0&&JSON.stringify(h)!==JSON.stringify(p)){a++;try{B(h)}finally{a--}}},{deep:!0}),{selectFile:c,fileList:s,uploadProgress:n,flushFileList:B,updateModelValue:m,initUpload:E,onDelete:v,uploadFile:f,cancelUpload:y,getFileList:()=>s.value,getFileObjectList:()=>(console.log("fileObjectMap:",l),s.value.map(h=>({fileItem:h,file:l.get(h._id)||null})).filter(h=>h.file!==null)),uploadAllFiles:async()=>{const h=s.value.filter(p=>p.status===X.PENDING);if(h.length===0){console.warn("没有待上传的文件");return}if(!t.value.action){console.warn("未配置上传地址");return}for(const p of h){const i=l.get(p._id);i?await f(p,i):(console.warn("找不到对应的File对象:",p.name),console.log("fileObjectMap:",p,l))}},clearAllFiles:()=>{s.value=[],n.value.clear(),l.clear(),m()}}}const wl={class:"lp-upload"},kl={key:0,class:"lp-upload__file-list"},El=["onClick"],Cl=["src"],$l={key:1,class:"lp-upload__placeholder"},Bl={key:2,class:"lp-upload__progress"},Sl={class:"lp-upload__progress-text"},vl=["onClick"],Tl={key:3,class:"lp-upload__handle"},Vl={key:1,class:"lp-upload__file-mode"},xl={class:"lp-upload__file-info"},jl={class:"lp-upload__file-details"},Ol={class:"lp-upload__file-name"},Ll={key:0,class:"lp-upload__file-size"},Nl={key:0,class:"lp-upload__file-progress"},zl={class:"lp-upload__progress-text"},Ml={class:"lp-upload__file-status"},Pl={key:0,class:"lp-upload__status-success"},Il={key:1,class:"lp-upload__status-error"},Rl={key:2,class:"lp-upload__status-pending"},Al={class:"lp-upload__file-actions"},Dl={class:"lp-upload__control flex"},Fl={name:"lp-upload"},gt=e.defineComponent({...Fl,props:e.mergeModels({type:{default:"img"},limit:{default:1},accept:{default:""},array:{type:Boolean},action:{},valueType:{default:K.AUTO},autoUpload:{type:Boolean,default:!0},responseField:{default:"data.fullUrl"}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(o,{expose:t}){const s=o,n=e.useModel(o,"modelValue"),l=e.inject("uploadConfig",null),a=e.computed(()=>({...s,action:s.action||l})),{selectFile:r,fileList:u,initUpload:c,onDelete:f,cancelUpload:y,getFileList:B,getFileObjectList:m,uploadAllFiles:E,clearAllFiles:v}=bl(n,a);e.reactive({});const O=e.computed(()=>!a.value.limit||u.value.length<a.value.limit);e.computed(()=>u.value.some(h=>h.status===X.PENDING));const V=h=>h<1024?h+" B":h<1024*1024?(h/1024).toFixed(1)+" KB":h<1024*1024*1024?(h/(1024*1024)).toFixed(1)+" MB":(h/(1024*1024*1024)).toFixed(1)+" GB",w=async()=>{await E()};function _(h){a.value.limit===1&&r()}return t({getFileList:B,getFileObjectList:m,uploadAllFiles:E,selectFile:r,fileList:u,clearAllFiles:v}),e.onMounted(()=>{c()}),(h,p)=>(e.openBlock(),e.createElementBlock("div",wl,[a.value.type==="img"?(e.openBlock(),e.createElementBlock("div",kl,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(u),(i,d)=>(e.openBlock(),e.createElementBlock("div",{class:"lp-upload__item",key:d,onClick:b=>_()},[i.url&&i.url.startsWith("http")?(e.openBlock(),e.createElementBlock("img",{key:0,class:"img",src:i.url,alt:""},null,8,Cl)):(e.openBlock(),e.createElementBlock("div",$l,[e.createVNode(e.unref(W.LpIcon),{is:"upload",size:"22",color:"#ccc"})])),i.uploader&&i.status===e.unref(X).UPLOADING?(e.openBlock(),e.createElementBlock("div",Bl,[e.createVNode(e.unref(je),{percentage:i.uploader.progress.percentage,status:i.uploader.progressStatus,"show-text":!1},null,8,["percentage","status"]),e.createElementVNode("div",Sl,e.toDisplayString(i.uploader.progress.percentage)+"%",1),e.createElementVNode("div",{class:"lp-upload__cancel",onClick:e.withModifiers(b=>e.unref(y)(i),["stop"])},[e.createVNode(e.unref(W.LpIcon),{is:"close",size:"12",color:"#fff"})],8,vl)])):(e.openBlock(),e.createElementBlock("div",Tl,[e.createVNode(e.unref(W.LpIcon),{is:"delete",size:"16",color:"#fff",onClick:e.withModifiers(b=>e.unref(f)(d),["stop"])},null,8,["onClick"])]))],8,El))),128)),O.value?(e.openBlock(),e.createElementBlock("div",{key:0,class:"lp-upload__item",onClick:p[0]||(p[0]=(...i)=>e.unref(r)&&e.unref(r)(...i))},[e.renderSlot(h.$slots,"select",{},()=>[e.createVNode(e.unref(W.LpIcon),{is:"upload",size:"22",color:"#ff0000"})])])):e.createCommentVNode("",!0)])):(e.openBlock(),e.createElementBlock("div",Vl,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(u),(i,d)=>{var b,C,S,$;return e.openBlock(),e.createElementBlock("div",{class:"lp-upload__file-item",key:d},[e.createElementVNode("div",xl,[e.createVNode(e.unref(W.LpIcon),{is:"teaching",size:"20",color:"#409eff"}),e.createElementVNode("div",jl,[e.createElementVNode("div",Ol,e.toDisplayString(i.name||"未知文件"),1),i.size?(e.openBlock(),e.createElementBlock("div",Ll,e.toDisplayString(V(i.size)),1)):e.createCommentVNode("",!0)])]),i.status===e.unref(X).UPLOADING?(e.openBlock(),e.createElementBlock("div",Nl,[e.createVNode(e.unref(je),{percentage:((C=(b=i.uploader)==null?void 0:b.progress)==null?void 0:C.percentage)||0,"show-text":!1,size:"small"},null,8,["percentage"]),e.createElementVNode("span",zl,e.toDisplayString((($=(S=i.uploader)==null?void 0:S.progress)==null?void 0:$.percentage)||0)+"%",1)])):e.createCommentVNode("",!0),e.createElementVNode("div",Ml,[i.status===e.unref(X).SUCCESS?(e.openBlock(),e.createElementBlock("span",Pl,[e.createVNode(e.unref(W.LpIcon),{is:"security",size:"16",color:"#67c23a"})])):i.status===e.unref(X).ERROR?(e.openBlock(),e.createElementBlock("span",Il,[e.createVNode(e.unref(W.LpIcon),{is:"close",size:"16",color:"#f56c6c"})])):i.status===e.unref(X).PENDING?(e.openBlock(),e.createElementBlock("span",Rl,[e.createVNode(e.unref(W.LpIcon),{is:"time",size:"16",color:"#e6a23c"})])):e.createCommentVNode("",!0)]),e.createElementVNode("div",Al,[e.createVNode(e.unref(W.LpIcon),{is:"delete",size:"16",color:"#f56c6c",onClick:g=>e.unref(f)(d),style:{cursor:"pointer"}},null,8,["onClick"])])])}),128)),e.createElementVNode("div",Dl,[e.createElementVNode("div",{class:"lp-upload__select-btn",onClick:p[1]||(p[1]=(...i)=>e.unref(r)&&e.unref(r)(...i))},[e.renderSlot(h.$slots,"select",{},()=>[p[2]||(p[2]=e.createElementVNode("button",{class:"btn btn-primary"},"选择文件",-1))])]),a.value.autoUpload?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",{key:0,class:"lp-upload__upload-btn",onClick:w},[e.renderSlot(h.$slots,"upload",{},()=>[p[3]||(p[3]=e.createElementVNode("button",{class:"btn btn-success"},"上传文件",-1))])]))])]))]))}}),Wl=Object.freeze(Object.defineProperty({__proto__:null,UploadTypeEnum:ue,default:{install:o=>{o.component(gt.name,gt)}}},Symbol.toStringTag,{value:"Module"}));var yt=typeof global=="object"&&global&&global.Object===Object&&global,Ul=typeof self=="object"&&self&&self.Object===Object&&self,te=yt||Ul||Function("return this")(),Ee=te.Symbol,_t=Object.prototype,Hl=_t.hasOwnProperty,Gl=_t.toString,fe=Ee?Ee.toStringTag:void 0;function Yl(o){var t=Hl.call(o,fe),s=o[fe];try{o[fe]=void 0;var n=!0}catch{}var l=Gl.call(o);return n&&(t?o[fe]=s:delete o[fe]),l}var Xl=Object.prototype,ql=Xl.toString;function Kl(o){return ql.call(o)}var Jl="[object Null]",Zl="[object Undefined]",bt=Ee?Ee.toStringTag:void 0;function me(o){return o==null?o===void 0?Zl:Jl:bt&&bt in Object(o)?Yl(o):Kl(o)}function Pe(o){return o!=null&&typeof o=="object"}var Ql=Array.isArray;function wt(o){var t=typeof o;return o!=null&&(t=="object"||t=="function")}var es="[object AsyncFunction]",ts="[object Function]",os="[object GeneratorFunction]",ns="[object Proxy]";function kt(o){if(!wt(o))return!1;var t=me(o);return t==ts||t==os||t==es||t==ns}var Ie=te["__core-js_shared__"],Et=function(){var o=/[^.]+$/.exec(Ie&&Ie.keys&&Ie.keys.IE_PROTO||"");return o?"Symbol(src)_1."+o:""}();function ls(o){return!!Et&&Et in o}var ss=Function.prototype,as=ss.toString;function se(o){if(o!=null){try{return as.call(o)}catch{}try{return o+""}catch{}}return""}var rs=/[\\^$.*+?()[\]{}|]/g,is=/^\[object .+?Constructor\]$/,cs=Function.prototype,ds=Object.prototype,ps=cs.toString,us=ds.hasOwnProperty,fs=RegExp("^"+ps.call(us).replace(rs,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function ms(o){if(!wt(o)||ls(o))return!1;var t=kt(o)?fs:is;return t.test(se(o))}function hs(o,t){return o==null?void 0:o[t]}function he(o,t){var s=hs(o,t);return ms(s)?s:void 0}var Re=he(te,"WeakMap"),gs=9007199254740991;function Ct(o){return typeof o=="number"&&o>-1&&o%1==0&&o<=gs}function ys(o){return o!=null&&Ct(o.length)&&!kt(o)}var _s=Object.prototype;function $t(o){var t=o&&o.constructor,s=typeof t=="function"&&t.prototype||_s;return o===s}var bs="[object Arguments]";function Bt(o){return Pe(o)&&me(o)==bs}var St=Object.prototype,ws=St.hasOwnProperty,ks=St.propertyIsEnumerable,Es=Bt(function(){return arguments}())?Bt:function(o){return Pe(o)&&ws.call(o,"callee")&&!ks.call(o,"callee")};function Cs(){return!1}var vt=typeof A=="object"&&A&&!A.nodeType&&A,Tt=vt&&typeof module=="object"&&module&&!module.nodeType&&module,$s=Tt&&Tt.exports===vt,Vt=$s?te.Buffer:void 0,Bs=Vt?Vt.isBuffer:void 0,Ss=Bs||Cs,vs="[object Arguments]",Ts="[object Array]",Vs="[object Boolean]",xs="[object Date]",js="[object Error]",Os="[object Function]",Ls="[object Map]",Ns="[object Number]",zs="[object Object]",Ms="[object RegExp]",Ps="[object Set]",Is="[object String]",Rs="[object WeakMap]",As="[object ArrayBuffer]",Ds="[object DataView]",Fs="[object Float32Array]",Ws="[object Float64Array]",Us="[object Int8Array]",Hs="[object Int16Array]",Gs="[object Int32Array]",Ys="[object Uint8Array]",Xs="[object Uint8ClampedArray]",qs="[object Uint16Array]",Ks="[object Uint32Array]",F={};F[Fs]=F[Ws]=F[Us]=F[Hs]=F[Gs]=F[Ys]=F[Xs]=F[qs]=F[Ks]=!0,F[vs]=F[Ts]=F[As]=F[Vs]=F[Ds]=F[xs]=F[js]=F[Os]=F[Ls]=F[Ns]=F[zs]=F[Ms]=F[Ps]=F[Is]=F[Rs]=!1;function Js(o){return Pe(o)&&Ct(o.length)&&!!F[me(o)]}function Zs(o){return function(t){return o(t)}}var xt=typeof A=="object"&&A&&!A.nodeType&&A,ge=xt&&typeof module=="object"&&module&&!module.nodeType&&module,Qs=ge&&ge.exports===xt,Ae=Qs&&yt.process,jt=function(){try{var o=ge&&ge.require&&ge.require("util").types;return o||Ae&&Ae.binding&&Ae.binding("util")}catch{}}(),Ot=jt&&jt.isTypedArray,ea=Ot?Zs(Ot):Js;function ta(o,t){return function(s){return o(t(s))}}var oa=ta(Object.keys,Object),na=Object.prototype,la=na.hasOwnProperty;function sa(o){if(!$t(o))return oa(o);var t=[];for(var s in Object(o))la.call(o,s)&&s!="constructor"&&t.push(s);return t}var De=he(te,"Map"),Fe=he(te,"DataView"),We=he(te,"Promise"),Ue=he(te,"Set"),Lt="[object Map]",aa="[object Object]",Nt="[object Promise]",zt="[object Set]",Mt="[object WeakMap]",Pt="[object DataView]",ra=se(Fe),ia=se(De),ca=se(We),da=se(Ue),pa=se(Re),ae=me;(Fe&&ae(new Fe(new ArrayBuffer(1)))!=Pt||De&&ae(new De)!=Lt||We&&ae(We.resolve())!=Nt||Ue&&ae(new Ue)!=zt||Re&&ae(new Re)!=Mt)&&(ae=function(o){var t=me(o),s=t==aa?o.constructor:void 0,n=s?se(s):"";if(n)switch(n){case ra:return Pt;case ia:return Lt;case ca:return Nt;case da:return zt;case pa:return Mt}return t});var ua="[object Map]",fa="[object Set]",ma=Object.prototype,ha=ma.hasOwnProperty;function ga(o){if(o==null)return!0;if(ys(o)&&(Ql(o)||typeof o=="string"||typeof o.splice=="function"||Ss(o)||ea(o)||Es(o)))return!o.length;var t=ae(o);if(t==ua||t==fa)return!o.size;if($t(o))return!sa(o).length;for(var s in o)if(ha.call(o,s))return!1;return!0}function It(o){const t=Object.assign({"./lp-button/index.ts":Gt,"./lp-checkbox/index.ts":Qt,"./lp-empty/index.ts":no,"./lp-form/index.ts":co,"./lp-input/index.ts":$o,"./lp-layer/index.ts":st,"./lp-layout/index.ts":tn,"./lp-list/index.ts":nn,"./lp-message/index.ts":sn,"./lp-panel/index.ts":dn,"./lp-progress/index.ts":hn,"./lp-radio/index.ts":Cn,"./lp-scrollbar/index.ts":vn,"./lp-select/index.ts":Hn,"./lp-switch/index.ts":ol,"./lp-table/index.ts":dl,"./lp-tabs/index.ts":ml,"./lp-tag/index.ts":yl,"./lp-upload/index.ts":Wl});console.debug("%cglobalComponents","color:green",t),Object.keys(t).forEach(s=>{const n=t[s].default;ga(n)||o.use(n)})}const ya=(o,t,s,n)=>{o.__pressTimer===null&&(o.__pressTimer=window.setTimeout(()=>{o.__longPressed=!0,typeof t.value=="function"&&t.value()},s))},Rt=o=>{o.__pressTimer!==null&&(clearTimeout(o.__pressTimer),o.__pressTimer=null)},At={mounted(o,t){const s=Number(t.arg)||500;o.__pressTimer=null,o.__longPressed=!1;const n=r=>{r.preventDefault(),r.stopPropagation(),ya(o,t,s)},l=r=>{Rt(o),setTimeout(()=>{o.__longPressed=!1},100)},a=r=>{o.__longPressed&&(console.log("handleClick 阻止默认事件",r),r.stopImmediatePropagation(),r.stopPropagation(),r.preventDefault(),o.__longPressed=!1)};o.__handleStart=n,o.__handleCancel=l,o.__handleClick=a,o.addEventListener("pointerdown",n),o.addEventListener("pointerup",l),o.addEventListener("pointerleave",l),o.addEventListener("pointercancel",l),o.addEventListener("click",a,!0)},unmounted(o){o.removeEventListener("pointerdown",o.__handleStart),o.removeEventListener("pointerup",o.__handleCancel),o.removeEventListener("pointerleave",o.__handleCancel),o.removeEventListener("pointercancel",o.__handleCancel),o.removeEventListener("click",o.__handleClick,!0),Rt(o)}},_a=Object.freeze(Object.defineProperty({__proto__:null,SelectedTag:ft,packageConfig:{name:"LooplanUiNeeds",title:"Looplan Ui Needs组件库",type:"local",version:"0.0.1",components:["SelectedTag"]}},Symbol.toStringTag,{value:"Module"}));console.debug("looplan-ui");const ba={install(o){It(o),et.appContext=o._context,W.setIconGateway({name:"looplan",url:"http://192.168.31.101:9000/IconGateway.detail"}),W.setComponentPackage(_a),o.directive("longpress",At)}},wa={class:"lp-toast"},ka={class:"lp-toast-content"},Ea=Object.freeze(Object.defineProperty({__proto__:null,default:{__name:"toast",props:{message:{type:String,default:""},duration:{type:Number,default:3e3}},emits:["close","shown"],setup(o,{emit:t}){const s=o,n=t;return e.onMounted(()=>{n("shown"),s.duration>0&&setTimeout(()=>{n("close")},s.duration)}),(l,a)=>(e.openBlock(),e.createElementBlock("div",wa,[e.createElementVNode("div",ka,[e.renderSlot(l.$slots,"default",{},()=>[e.createTextVNode(e.toDisplayString(o.message),1)])])]))}}},Symbol.toStringTag,{value:"Module"})),Ca={class:"lp-confirm"},$a={class:"lp-confirm-content"},Ba=Object.freeze(Object.defineProperty({__proto__:null,default:{__name:"confirm",props:{modelValue:{type:Object,default:()=>({})}},emits:["update:modelValue","close","confirm","cancel"],setup(o,{emit:t}){const s=t,n=()=>{s("confirm",!0),s("close")},l=()=>{s("cancel",!1),s("close")};return(a,r)=>{var u;return e.openBlock(),e.createElementBlock("div",Ca,[e.createElementVNode("div",$a,e.toDisplayString((u=o.modelValue)==null?void 0:u.message),1),e.createElementVNode("div",{class:"lp-confirm-btns"},[e.createElementVNode("button",{class:"lp-confirm-btn lp-confirm-cancel",onClick:l},"取消"),e.createElementVNode("button",{class:"lp-confirm-btn lp-confirm-ok",onClick:n},"确定")])])}}}},Symbol.toStringTag,{value:"Module"})),Sa={class:"lp-alert"},va={class:"lp-alert-content"},Ta=Object.freeze(Object.defineProperty({__proto__:null,default:{__name:"alert",props:{modelValue:{type:Object,default:()=>({})}},emits:["update:modelValue","close"],setup(o,{emit:t}){const s=t,n=()=>{s("close")};return(l,a)=>{var r;return e.openBlock(),e.createElementBlock("div",Sa,[e.createElementVNode("div",va,e.toDisplayString((r=o.modelValue)==null?void 0:r.message),1),e.createElementVNode("div",{class:"lp-alert-btns"},[e.createElementVNode("button",{class:"lp-alert-btn lp-alert-ok",onClick:n},"确定")])])}}}},Symbol.toStringTag,{value:"Module"}));A.LpLayer=st,A.LpTag=pe,A.default=ba,A.longpress=At,A.registerLooplanUiComponents=It,Object.defineProperties(A,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
